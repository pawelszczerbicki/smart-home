!function(e){e.ASSET_HOST="//d2s28ygc2k7998.cloudfront.net";var t=e.GB={collections:{},models:{},views:{},templates:{},config:{PUSH_URL:"https://push.geckoboard.com/v1/send/",ROOT_URL:location.protocol+"//"+document.domain+"/",SERVICE_IMAGE_URL:e.ASSET_HOST+"/logos/",PERMISSION_ROLES:{read:"Read only",power_user:"Power user",admin:"Admin"},HELP_CHAT_ENABLED:!0}};e.API_HOST||(e.API_HOST="http://manage.geckoboard.dev"),e.API_ROOT="/",e.API_URL=e.API_HOST+e.API_ROOT,e.DATA_API_HOST||(e.DATA_API_HOST="http://data.geckoboard.dev"),e.DATA_API_ROOT="/",e.DATA_API_URL=e.DATA_API_HOST+e.DATA_API_ROOT,e.AUTH_API_HOST||(e.AUTH_API_HOST="http://auth.geckoboard.dev"),e.AUTH_API_ROOT="/",e.AUTH_API_URL=e.AUTH_API_HOST+e.AUTH_API_ROOT,$.ajaxPrefilter(function(e,n){t.models.config&&t.models.config.get("loop")&&(e.url=n.url+(-1===n.url.indexOf("?")?"?":"&")+"public_hash="+t.models.config.get("dashHash").replace(/_.*$/,"")),e.xhrFields={withCredentials:!0}}),$(document).ajaxError(function(e,n,a,l){401===n.status||403===n.status?t.loggedOutError||(t.loggedOutError=new t.views.Notification({message:"You have been logged out",type:"error",onclose:function(){delete t.loggedOutError},link:{text:"Log back in",href:"/"}}).render()):GeckoErrorLog.notify({message:n.status+" "+l,url:a.url,extraInfo:{responseText:n.responseText,accountURL:location.href},grouping:{type:"Default Ajax Error Handler",location:"app.js"}})}),t.models.Model=Backbone.Model.extend({parse:function(e){return _.has(e,"data")&&1===_.keys(e).length?e.data:e},attributeJSON:function(){return _.extend(_.clone(this.attributes),this.toJSON())}})}(this),this.GB=this.GB||{},this.GB.templates=this.GB.templates||{},Handlebars.registerPartial("widgetFooter",Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+='\n      <footer>\n        <div class="inner">\n          <span>',(a=n.footerName)?a=a.call(e,{hash:{},data:t}):(a=e.footerName,a=typeof a===d?a.apply(e):a),(a||0===a)&&(l+=a),l+='</span>\n\n          <ul class="widget-actions">\n            <li><a class="edit" href="#" title="Edit"></a></li>\n          ',a=n["if"].call(e,e.notForDeveloperPreview,{hash:{},inverse:p.noop,fn:p.program(2,s,t),data:t}),(a||0===a)&&(l+=a),l+="\n          </ul>\n        </div>\n      </footer>\n  "}function s(){return'\n            <li><a class="copy" href="#" title="Copy"></a></li>\n            <li><a class="delete" href="#"></a></li>\n          '}function r(e,t){var a,l="";return l+="\n      ",a=n.unless.call(e,e.isLarge,{hash:{},inverse:p.noop,fn:p.program(5,o,t),data:t}),(a||0===a)&&(l+=a),l+="\n  "}function o(e,t){var a,l="";return l+='\n          <footer>\n            <div class="inner">\n              ',(a=n.footerName)?a=a.call(e,{hash:{},data:t}):(a=e.footerName,a=typeof a===d?a.apply(e):a),(a||0===a)&&(l+=a),l+="\n            </div>\n          </footer>\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var c,h="",d="function",p=this;return h+="    </div><!-- .widget-canvas -->\n  </section>\n  ",c=n.unless.call(t,t.isPublic,{hash:{},inverse:p.program(4,r,l),fn:p.program(1,i,l),data:l}),(c||0===c)&&(h+=c),h+="\n</div><!-- .widget-inner -->\n"})),Handlebars.registerPartial("widgetHeader",Handlebars.template(function(e,t,n,a,l){function i(){return" large-screen"}function s(e,t){var a,l="";return l+="\n  <header ",a=n.unless.call(e,e.canReload,{hash:{},inverse:f.noop,fn:f.program(4,r,t),data:t}),(a||0===a)&&(l+=a),l+=">\n      <h1>",(a=n.title)?a=a.call(e,{hash:{},data:t}):(a=e.title,a=typeof a===m?a.apply(e):a),l+=g(a)+"</h1>\n    </header>\n  "}function r(){return' class="no-reload"'}function o(e,t){var a,l="";return l+='\n    <a class="led ',a=n["if"].call(e,e.ledClass,{hash:{},inverse:f.program(9,h,t),fn:f.program(7,c,t),data:t}),(a||0===a)&&(l+=a),l+='" href="#"></a>\n  '}function c(e,t){var a;return(a=n.ledClass)?a=a.call(e,{hash:{},data:t}):(a=e.ledClass,a=typeof a===m?a.apply(e):a),g(a)}function h(){return"success"}function d(){return" no-title"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var p,u="",f=this,m="function",g=this.escapeExpression;return u+='<div class="widget-inner ',(p=n.sizeClass)?p=p.call(t,{hash:{},data:l}):(p=t.sizeClass,p=typeof p===m?p.apply(t):p),u+=g(p),p=n["if"].call(t,t.isLarge,{hash:{},inverse:f.noop,fn:f.program(1,i,l),data:l}),(p||0===p)&&(u+=p),u+='">\n  ',p=n["if"].call(t,t.hasTitle,{hash:{},inverse:f.noop,fn:f.program(3,s,l),data:l}),(p||0===p)&&(u+=p),u+="\n  ",p=n["if"].call(t,t.canReload,{hash:{},inverse:f.noop,fn:f.program(6,o,l),data:l}),(p||0===p)&&(u+=p),u+='\n  <section class="widget-body ',(p=n.bodyClass)?p=p.call(t,{hash:{},data:l}):(p=t.bodyClass,p=typeof p===m?p.apply(t):p),u+=g(p),p=n.unless.call(t,t.hasTitle,{hash:{},inverse:f.noop,fn:f.program(11,d,l),data:l}),(p||0===p)&&(u+=p),u+='">\n    <div class="widget-canvas">\n'})),this.GB.templates.buttonFormElement=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+="\n    data-",(a=n.key)?a=a.call(e,{hash:{},data:t}):(a=e.key,a=typeof a===o?a.apply(e):a),l+=c(a)+'="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===o?a.apply(e):a),l+=c(a)+'"\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var s,r="",o="function",c=this.escapeExpression,h=this;return r+='<button\n  class="btn ',(s=n.elementClass)?s=s.call(t,{hash:{},data:l}):(s=t.elementClass,s=typeof s===o?s.apply(t):s),r+=c(s)+'"\n  name="',(s=n.name)?s=s.call(t,{hash:{},data:l}):(s=t.name,s=typeof s===o?s.apply(t):s),r+=c(s)+'"\n  ',s=n.each.call(t,t.data,{hash:{},inverse:h.noop,fn:h.program(1,i,l),data:l}),(s||0===s)&&(r+=s),r+=">\n  ",(s=n.value)?s=s.call(t,{hash:{},data:l}):(s=t.value,s=typeof s===o?s.apply(t):s),r+=c(s)+"\n</button>\n"}),this.GB.templates.buttonSelectFormElement=Handlebars.template(function(e,t,n,a,l){function i(e,t,a){var l,i,r="";return r+='\n<button value="',(l=n.value)?l=l.call(e,{hash:{},data:t}):(l=e.value,l=typeof l===c?l.apply(e):l),r+=h(l)+'" class="button btn-field btn-plain',l=n["if"].call(e,e.active,{hash:{},inverse:d.noop,fn:d.program(2,s,t),data:t}),(l||0===l)&&(r+=l),r+='" data-field="'+h((l=a.name,typeof l===c?l.apply(e):l))+'">',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===c?i.apply(e):i),r+=h(i)+"</button>\n"}function s(){return" active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var r,o="",c="function",h=this.escapeExpression,d=this;return r=n.each.call(t,t.options,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,i,l,t),data:l}),(r||0===r)&&(o+=r),o+='\n<input type="hidden" name="',(r=n.name)?r=r.call(t,{hash:{},data:l}):(r=t.name,r=typeof r===c?r.apply(t):r),o+=h(r)+'" value="',(r=n.value)?r=r.call(t,{hash:{},data:l}):(r=t.value,r=typeof r===c?r.apply(t):r),o+=h(r)+'" />\n'}),this.GB.templates.checkboxFormElement=Handlebars.template(function(e,t,n,a,l){function i(e,t,a){var l,i,r="";return r+='\n    <input class="'+h((l=a.elementClass,typeof l===c?l.apply(e):l))+'" id="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===c?i.apply(e):i),r+=h(i)+'" name="'+h((l=a.name,typeof l===c?l.apply(e):l))+'" type="checkbox" value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===c?i.apply(e):i),r+=h(i)+'"',i=n["if"].call(e,e.selected,{hash:{},inverse:d.noop,fn:d.program(2,s,t),data:t}),(i||0===i)&&(r+=i),r+='>\n    <label for="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===c?i.apply(e):i),r+=h(i)+'">',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===c?i.apply(e):i),r+=h(i)+"</label>\n  "}function s(){return" checked"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var r,o="",c="function",h=this.escapeExpression,d=this;return o+='<div class="selection-group">\n  ',r=n.each.call(t,t.options,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,i,l,t),data:l}),(r||0===r)&&(o+=r),o+="\n</div>\n"}),this.GB.templates.dashboardSizesFormElement=Handlebars.template(function(e,t,n,a,l){function i(e,t,a){var l,i,r="";return r+='\n  <input type="button" class="button btn-st btn-grid-',(l=n.value)?l=l.call(e,{hash:{},data:t}):(l=e.value,l=typeof l===c?l.apply(e):l),r+=h(l),l=n["if"].call(e,e.active,{hash:{},inverse:d.noop,fn:d.program(2,s,t),data:t}),(l||0===l)&&(r+=l),r+='" data-field="'+h((l=a.name,typeof l===c?l.apply(e):l))+'" data-value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===c?i.apply(e):i),r+=h(i)+'">\n'}function s(){return" btn-active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var r,o="",c="function",h=this.escapeExpression,d=this;return r=n.each.call(t,t.options,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,i,l,t),data:l}),(r||0===r)&&(o+=r),o+='\n<input type="hidden" name="',(r=n.name)?r=r.call(t,{hash:{},data:l}):(r=t.name,r=typeof r===c?r.apply(t):r),o+=h(r)+'" value="',(r=n.value)?r=r.call(t,{hash:{},data:l}):(r=t.value,r=typeof r===c?r.apply(t):r),o+=h(r)+'" />'}),this.GB.templates.elementWrapper=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+='\n    <label class="field-label">',(a=n.label)?a=a.call(e,{hash:{},data:t}):(a=e.label,a=typeof a===c?a.apply(e):a),l+=h(a)+"</label>\n  "}function s(e,t){var a,l="";return l+='\n    <div class="field-help">\n      <a class="help-icon" href="#" title="Show help information for this field">Show help</a>\n      <span class="hidden help-text">',(a=n.help)?a=a.call(e,{hash:{},data:t}):(a=e.help,a=typeof a===c?a.apply(e):a),(a||0===a)&&(l+=a),l+="</span>\n    </div>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var r,o="",c="function",h=this.escapeExpression,d=this;return o+='<div class="',(r=n.fieldClass)?r=r.call(t,{hash:{},data:l}):(r=t.fieldClass,r=typeof r===c?r.apply(t):r),o+=h(r)+'">\n  ',r=n["if"].call(t,t.label,{hash:{},inverse:d.noop,fn:d.program(1,i,l),data:l}),(r||0===r)&&(o+=r),o+="\n\n  ",r=n["if"].call(t,t.help,{hash:{},inverse:d.noop,fn:d.program(3,s,l),data:l}),(r||0===r)&&(o+=r),o+="\n\n  ",(r=n.html)?r=r.call(t,{hash:{},data:l}):(r=t.html,r=typeof r===c?r.apply(t):r),(r||0===r)&&(o+=r),o+="\n</div>\n"}),this.GB.templates.fileFormElement=Handlebars.template(function(e,t,n,a,l){function i(){return" with-delete"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var s,r="",o=this,c="function",h=this.escapeExpression;return r+='<span class="file-field',s=n["if"].call(t,t.showDeleteButton,{hash:{},inverse:o.noop,fn:o.program(1,i,l),data:l}),(s||0===s)&&(r+=s),r+='">\n  <label>',(s=n.elementLabel)?s=s.call(t,{hash:{},data:l}):(s=t.elementLabel,s=typeof s===c?s.apply(t):s),r+=h(s)+"</label>\n  <input type='file' name='",(s=n.name)?s=s.call(t,{hash:{},data:l}):(s=t.name,s=typeof s===c?s.apply(t):s),r+=h(s)+'\'>\n\n  <a href="#" class="delete" title="Remove this file">',(s=n.deleteButtonText)?s=s.call(t,{hash:{},data:l}):(s=t.deleteButtonText,s=typeof s===c?s.apply(t):s),r+=h(s)+"</a>\n</span>\n"}),this.GB.templates.inputFormElement=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+="\n    ",(a=n.name)?a=a.call(e,{hash:{},data:t}):(a=e.name,a=typeof a===c?a.apply(e):a),l+=h(a),a=n["if"].call(e,e.value,{hash:{},inverse:d.noop,fn:d.program(2,s,t),data:t}),(a||0===a)&&(l+=a),l+="\n  "}function s(e,t){var a,l="";return l+='="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===c?a.apply(e):a),l+=h(a)+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var r,o="",c="function",h=this.escapeExpression,d=this;return o+='<input\n  type="',(r=n.type)?r=r.call(t,{hash:{},data:l}):(r=t.type,r=typeof r===c?r.apply(t):r),o+=h(r)+'"\n  class="',(r=n.elementClass)?r=r.call(t,{hash:{},data:l}):(r=t.elementClass,r=typeof r===c?r.apply(t):r),o+=h(r)+'"\n  name="',(r=n.name)?r=r.call(t,{hash:{},data:l}):(r=t.name,r=typeof r===c?r.apply(t):r),o+=h(r)+'"\n  value="',(r=n.value)?r=r.call(t,{hash:{},data:l}):(r=t.value,r=typeof r===c?r.apply(t):r),o+=h(r)+'"\n  ',r=n.each.call(t,t.attributes,{hash:{},inverse:d.noop,fn:d.program(1,i,l),data:l}),(r||0===r)&&(o+=r),o+=">\n"}),this.GB.templates.limitReachedModal=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+="\n      ",(a=n.secondary_message)?a=a.call(e,{hash:{},data:t}):(a=e.secondary_message,a=typeof a===d?a.apply(e):a),l+=p(a)+"\n    "}function s(){return"\n      Please contact your administrator to upgrade.\n    "}function r(){return'\n      <a href="#" class="btn confirm">Upgrade Account</a>\n      <a href="#" class="btn cancel">Not now</a>\n    '}function o(){return'\n      <a href="#" class="btn confirm">Okay</a>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var c,h="",d="function",p=this.escapeExpression,u=this;return h+='<div class="inner">\n  <div class="modal-display-area stop">\n    <h2> ',(c=n.title)?c=c.call(t,{hash:{},data:l}):(c=t.title,c=typeof c===d?c.apply(t):c),h+=p(c)+" </h2>\n    <p>",(c=n.message)?c=c.call(t,{hash:{},data:l}):(c=t.message,c=typeof c===d?c.apply(t):c),h+=p(c)+" \n    ",c=n["if"].call(t,t.admin,{hash:{},inverse:u.program(3,s,l),fn:u.program(1,i,l),data:l}),(c||0===c)&&(h+=c),h+="\n    </p>\n    ",c=n["if"].call(t,t.admin,{hash:{},inverse:u.program(7,o,l),fn:u.program(5,r,l),data:l}),(c||0===c)&&(h+=c),h+="\n  </div>\n</div>\n"}),this.GB.templates.loadingOverlay=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+=" <p>",(a=n.message)?a=a.call(e,{hash:{},data:t}):(a=e.message,a=typeof a===o?a.apply(e):a),l+=c(a)+"</p> "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var s,r="",o="function",c=this.escapeExpression,h=this;return r+='<div class="loading-overlay ',(s=n.colorClass)?s=s.call(t,{hash:{},data:l}):(s=t.colorClass,s=typeof s===o?s.apply(t):s),r+=c(s)+'">\n  ',s=n["if"].call(t,t.message,{hash:{},inverse:h.noop,fn:h.program(1,i,l),data:l}),(s||0===s)&&(r+=s),r+="\n</div>\n"}),this.GB.templates.mapFormElement=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l,i="";return i+='\n  <span class="sneaky-select">\n    <label>'+u((a=e.selectedCountry,a=null==a||a===!1?a:a.name,typeof a===p?a.apply(e):a))+'</label>\n    <select class="map-field" name="',(l=n.name)?l=l.call(e,{hash:{},data:t}):(l=e.name,l=typeof l===p?l.apply(e):l),i+=u(l)+'">\n      ',l=n.each.call(e,e.maps,{hash:{},inverse:f.noop,fn:f.program(2,s,t),data:t}),(l||0===l)&&(i+=l),i+="\n    </select>\n  </span>\n"}function s(e,t){var a,l="";return l+='\n        <option value="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===p?a.apply(e):a),l+=u(a)+'"',a=n["if"].call(e,e.selected,{hash:{},inverse:f.noop,fn:f.program(3,r,t),data:t}),(a||0===a)&&(l+=a),l+=">",(a=n.name)?a=a.call(e,{hash:{},data:t}):(a=e.name,a=typeof a===p?a.apply(e):a),l+=u(a)+"</option>\n      "}function r(){return" selected"}function o(e,t){var a,l="";return l+='\n  <input type="hidden" name="',(a=n.name)?a=a.call(e,{hash:{},data:t}):(a=e.name,a=typeof a===p?a.apply(e):a),l+=u(a)+'" value="europe">\n'}function c(e,t){var a,l,i="";return i+='\n  <span class="sneaky-select double-select">\n    <label>'+u((a=e.selectedRegion,a=null==a||a===!1?a:a.name,typeof a===p?a.apply(e):a))+'</label>\n    <select class="map-region-field" name="region">\n      ',l=n.each.call(e,e.regions,{hash:{},inverse:f.noop,fn:f.program(2,s,t),data:t}),(l||0===l)&&(i+=l),i+="\n    </select>\n  </span>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var h,d="",p="function",u=this.escapeExpression,f=this;return h=n["if"].call(t,t.map_dropdown,{hash:{},inverse:f.program(5,o,l),fn:f.program(1,i,l),data:l}),(h||0===h)&&(d+=h),d+="\n\n",h=n["if"].call(t,t.region_dropdown,{hash:{},inverse:f.noop,fn:f.program(7,c,l),data:l}),(h||0===h)&&(d+=h),d+="\n"}),this.GB.templates.notificationBar=Handlebars.template(function(e,t,n,a,l){function i(e){var t,n="";return n+='\n      - <a class="call-to-action" href="'+c((t=e.link,t=null==t||t===!1?t:t.href,typeof t===o?t.apply(e):t))+'">'+c((t=e.link,t=null==t||t===!1?t:t.text,typeof t===o?t.apply(e):t))+"</a>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var s,r="",o="function",c=this.escapeExpression,h=this;return r+='<div class="notification ',(s=n.type)?s=s.call(t,{hash:{},data:l}):(s=t.type,s=typeof s===o?s.apply(t):s),r+=c(s)+'">\n  <p class="message">\n    ',(s=n.message)?s=s.call(t,{hash:{},data:l}):(s=t.message,s=typeof s===o?s.apply(t):s),r+=c(s)+"\n    ",s=n["if"].call(t,t.link,{hash:{},inverse:h.noop,fn:h.program(1,i,l),data:l}),(s||0===s)&&(r+=s),r+="\n  </p>\n</div>\n"}),this.GB.templates.prompt=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var i,s="",r="function",o=this.escapeExpression;return s+='<div class="inner">\n  <div class="modal-display-area ',(i=n.type)?i=i.call(t,{hash:{},data:l}):(i=t.type,i=typeof i===r?i.apply(t):i),s+=o(i)+'">\n    <h2>',(i=n.title)?i=i.call(t,{hash:{},data:l}):(i=t.title,i=typeof i===r?i.apply(t):i),s+=o(i)+"</h2>\n    <p>",(i=n.message)?i=i.call(t,{hash:{},data:l}):(i=t.message,i=typeof i===r?i.apply(t):i),s+=o(i)+'</p>\n    <a href="#" class="btn confirm">',(i=n.confirmText)?i=i.call(t,{hash:{},data:l}):(i=t.confirmText,i=typeof i===r?i.apply(t):i),s+=o(i)+'</a>\n    <a href="#" class="btn cancel">Cancel</a>\n  </div>\n</div>\n'}),this.GB.templates.radioFormElement=Handlebars.template(function(e,t,n,a,l){function i(e,t,a){var l,i,r="";return r+='\n    <input class="'+h((l=a.elementClass,typeof l===c?l.apply(e):l))+'" id="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===c?i.apply(e):i),r+=h(i)+'" name="'+h((l=a.name,typeof l===c?l.apply(e):l))+'" type="radio" value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===c?i.apply(e):i),r+=h(i)+'"',i=n["if"].call(e,e.selected,{hash:{},inverse:d.noop,fn:d.program(2,s,t),data:t}),(i||0===i)&&(r+=i),r+='>\n    <label for="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===c?i.apply(e):i),r+=h(i)+'">',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===c?i.apply(e):i),r+=h(i)+"</label>\n  "}function s(){return" checked"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var r,o="",c="function",h=this.escapeExpression,d=this;return o+='<div class="selection-group">\n  ',r=n.each.call(t,t.options,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,i,l,t),data:l}),(r||0===r)&&(o+=r),o+="\n</div>\n"}),this.GB.templates.selectFormElement=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+="\n      ",(a=n.name)?a=a.call(e,{hash:{},data:t}):(a=e.name,a=typeof a===p?a.apply(e):a),l+=u(a),a=n["if"].call(e,e.value,{hash:{},inverse:f.noop,fn:f.program(2,s,t),data:t}),(a||0===a)&&(l+=a),l+="\n    "}function s(e,t){var a,l="";return l+='="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===p?a.apply(e):a),l+=u(a)+'"'}function r(e,t){var a,l="";return l+="\n      data-",(a=n.key)?a=a.call(e,{hash:{},data:t}):(a=e.key,a=typeof a===p?a.apply(e):a),l+=u(a)+'="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===p?a.apply(e):a),l+=u(a)+'"\n    '}function o(e,t){var a,l,i="";return i+='\n      <option value="'+u((a=e.value,typeof a===p?a.apply(e):a))+'"',l=n["if"].call(e,e.selected,{hash:{},inverse:f.noop,fn:f.program(7,c,t),data:t}),(l||0===l)&&(i+=l),i+=">"+u((a=e.name,typeof a===p?a.apply(e):a))+"</option>\n    "}function c(){return" selected"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var h,d="",p="function",u=this.escapeExpression,f=this;return d+='<span class="sneaky-select">\n  <label>',(h=n.selectedValueText)?h=h.call(t,{hash:{},data:l}):(h=t.selectedValueText,h=typeof h===p?h.apply(t):h),d+=u(h)+'</label>\n  <select\n    name="',(h=n.name)?h=h.call(t,{hash:{},data:l}):(h=t.name,h=typeof h===p?h.apply(t):h),d+=u(h)+'"\n    class="',(h=n.elementClass)?h=h.call(t,{hash:{},data:l}):(h=t.elementClass,h=typeof h===p?h.apply(t):h),d+=u(h)+'"\n    ',h=n.each.call(t,t.attributes,{hash:{},inverse:f.noop,fn:f.program(1,i,l),data:l}),(h||0===h)&&(d+=h),d+="\n    ",h=n.each.call(t,t.data,{hash:{},inverse:f.noop,fn:f.program(4,r,l),data:l}),(h||0===h)&&(d+=h),d+=">\n    ",h=n.each.call(t,t.options,{hash:{},inverse:f.noop,fn:f.program(6,o,l),data:l}),(h||0===h)&&(d+=h),d+="\n  </select>\n</span>\n"}),this.GB.templates.timezoneFormElement=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l,i="";return i+='\n      <option value="'+d((a=e.code,typeof a===h?a.apply(e):a))+'"',l=n["if"].call(e,e.selected,{hash:{},inverse:p.noop,fn:p.program(2,s,t),data:t}),(l||0===l)&&(i+=l),i+=">"+d((a=e.name,typeof a===h?a.apply(e):a))+"</option>\n    "}function s(){return' selected="true"'}function r(e,t){var a,l,i="";return i+='\n    <option value="'+d((a=e.code,typeof a===h?a.apply(e):a))+'"',l=n["if"].call(e,e.selected,{hash:{},inverse:p.noop,fn:p.program(2,s,t),data:t}),(l||0===l)&&(i+=l),i+=">"+d((a=e.name,typeof a===h?a.apply(e):a))+"</option>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var o,c="",h="function",d=this.escapeExpression,p=this;return c+='<span class="sneaky-select">\n  <label>',(o=n.countryLabel)?o=o.call(t,{hash:{},data:l}):(o=t.countryLabel,o=typeof o===h?o.apply(t):o),c+=d(o)+'</label>\n  <select name=\'country\' class="timezone-country">\n    <option value="">Select country&hellip;</option>\n    ',o=n.each.call(t,t.countries,{hash:{},inverse:p.noop,fn:p.program(1,i,l),data:l}),(o||0===o)&&(c+=o),c+='\n  </select>\n</span>\n\n<span class="sneaky-select timezone-location">\n  <label>',(o=n.timezoneLabel)?o=o.call(t,{hash:{},data:l}):(o=t.timezoneLabel,o=typeof o===h?o.apply(t):o),c+=d(o)+'</label>\n  <select name="',(o=n.name)?o=o.call(t,{hash:{},data:l}):(o=t.name,o=typeof o===h?o.apply(t):o),c+=d(o)+'">\n  ',o=n.each.call(t,t.timezones,{hash:{},inverse:p.noop,fn:p.program(4,r,l),data:l}),(o||0===o)&&(c+=o),c+="\n  </select>\n</span>\n"}),this.GB.templates.widgetConfigPane=Handlebars.template(function(e,t,n,a,l){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{},'<div class="form-wrapper"></div>\n'}),this.GB.templates.widgetSizesFormElement=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+='\n  <input type="button" class="button btn-size-',(a=n.oldSize)?a=a.call(e,{hash:{},data:t}):(a=e.oldSize,a=typeof a===c?a.apply(e):a),l+=h(a),a=n["if"].call(e,e.active,{hash:{},inverse:d.noop,fn:d.program(2,s,t),data:t}),(a||0===a)&&(l+=a),l+='" data-value="',(a=n.size)?a=a.call(e,{hash:{},data:t}):(a=e.size,a=typeof a===c?a.apply(e):a),l+=h(a)+'">\n'}function s(){return" active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var r,o="",c="function",h=this.escapeExpression,d=this;return r=n.each.call(t,t.sizes,{hash:{},inverse:d.noop,fn:d.program(1,i,l),data:l}),(r||0===r)&&(o+=r),o+='\n<input type="hidden" name="',(r=n.name)?r=r.call(t,{hash:{},data:l}):(r=t.name,r=typeof r===c?r.apply(t):r),o+=h(r)+'" value="',(r=n.value)?r=r.call(t,{hash:{},data:l}):(r=t.value,r=typeof r===c?r.apply(t):r),o+=h(r)+'" />'}),this.GB.templates.addWidgetPreview=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var i,s="",r="function",o=this.escapeExpression;return s+='<h2>Configure your widget</h2>\n<p>\n  This is where the magic happens. You\'ve decided which widget you want to display, now lets set up\n  your widget.\n</p>\n<p>\n  Where applicable, make sure you have the account selected that you wish to display data from. Now\n  set the options available for the widget:\n</p>\n<p>\n  If you want you can give your widget a label, this will be displayed at the top of the widget on\n  your dashboard.\n</p>\n<p>\n  Choose the widget size - this determines how large the widget will be displayed on your dashboard.\n</p>\n<p>\n  There may be some other configuration options that you can select too, which will give you more\n  control over the widget. To learn more about any of the options, just click the info icon.\n</p>\n<h2>Example Widget</h2>\n<p>\n  Here is an example of the widget you\'re creating, using dummy data.\n</p>\n<article class="widget-type-preview">\n  <aside class="preview">\n    <img src="',(i=n.imageURL)?i=i.call(t,{hash:{},data:l}):(i=t.imageURL,i=typeof i===r?i.apply(t):i),s+=o(i)+'">\n  </aside>\n</article>\n'}),this.GB.templates.configScreen=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var i,s="",r="function",o=this.escapeExpression;return s+='<header class="config-screen-admin-bar">\n  <div class="inner dashboard-sized-el">\n    <h2>',(i=n.title)?i=i.call(t,{hash:{},data:l}):(i=t.title,i=typeof i===r?i.apply(t):i),s+=o(i)+'</h2>\n    <a class="cancel-btn" href="#">Cancel</a>\n  </div>\n</header>\n\n<div class="inner">\n  <aside class="side-panes"></aside>\n  <div class="workspace"></div>\n</div>\n'}),this.GB.templates.configureWidget=Handlebars.template(function(e,t,n,a,l){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{},'<form action="/widget/save/" method="POST" id="config-form" enctype="multipart/form-data" style="width: 600px">\n    <div class="b-widget">\n        <header>\n            <section>Configure widget</section>\n            <aside><a href="#" class="lnk-close"></a></aside>\n        </header>\n        <section class="b-widget-body">\n            <div class="b-widget-inner">\n                <div class="b-popup-note">Configure your widget.</div>\n                <div class="b-popup-note b-popup-warn disabled"></div>\n                <div class="form-fields">\n                </div>\n            </div>\n        </section>\n        <footer class="clrfix">\n            <div class="fr">\n                <input type="submit" class="button btn-control btn-ok" value="Save">\n            </div>\n            <div class="fl">\n                <input type="button" id="btn-cancel" class="button btn-control-plain" value="Cancel">\n            </div>\n        </footer>\n    </div>\n</form>\n'}),this.GB.templates.connectWidget=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+="\n  <p>\n    You need to connect Geckoboard to ",(a=n.serviceName)?a=a.call(e,{hash:{},data:t}):(a=e.serviceName,a=typeof a===h?a.apply(e):a),l+=d(a)+" so we can display your\n    data. We'll use your details to access your acount via the service's API.\n  </p>\n"}function s(e,t){var a,l="";return l+="\n  <p>\n    You need to connect Geckoboard to ",(a=n.serviceName)?a=a.call(e,{hash:{},data:t}):(a=e.serviceName,a=typeof a===h?a.apply(e):a),l+=d(a)+" so we can display your\n    data. We don't store your account details or data on our servers, it's all\n    safe and secure\n  </p>\n"}function r(){return'\n<a class="support-link" href="http://support.geckoboard.com/">Tell me more about why I need to do this</a>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var o,c="",h="function",d=this.escapeExpression,p=this;return c+="<h2>Connect to ",(o=n.serviceName)?o=o.call(t,{hash:{},data:l}):(o=t.serviceName,o=typeof o===h?o.apply(t):o),c+=d(o)+"</h2>\n",o=n["if"].call(t,t.isBasicAuth,{hash:{},inverse:p.program(3,s,l),fn:p.program(1,i,l),data:l}),(o||0===o)&&(c+=o),c+='\n\n<p class="error"></p>\n\n<section class="form"></section>\n\n',o=n["if"].call(t,t.isBasicAuth,{hash:{},inverse:p.noop,fn:p.program(5,r,l),data:l}),(o||0===o)&&(c+=o),c+="\n\n"}),this.GB.templates.copyWidget=Handlebars.template(function(e,t,n,a,l){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{},'<div class="inner">\n  <div class="modal-display-area copy">\n    <h2>Copy Widget</h2>\n\n    <div id="dashboard-selection"></div>\n\n    <a href="#" class="btn confirm">Copy widget</a>\n    <a href="#" class="btn cancel">Cancel</a>\n  </div>\n</div>\n'}),this.GB.templates.cryptoPasswordModal=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var i,s="",r="function",o=this.escapeExpression;return s+='<div class="inner">\n  <div class="modal-display-area">\n  <h2>Encrypted widgets detected</h2>\n  <p>\n    You need to enter <strong>exactly</strong> the same password which\n    was used to encrypt the content.\n  </p>\n   <div class="form-wrapper"></div>\n    <a href="#" class="btn confirm">',(i=n.confirmText)?i=i.call(t,{hash:{},data:l}):(i=t.confirmText,i=typeof i===r?i.apply(t):i),s+=o(i)+'</a>\n    <a href="#" class="btn cancel">Cancel</a>\n  </div>\n</div>\n'}),this.GB.templates.customWidgetConfig=Handlebars.template(function(e,t,n,a,l){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{},"woot\n"}),this.GB.templates.customWidgetErrorModal=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var i,s="",r="function",o=this.escapeExpression;return s+='<div class="inner">\n  <div class="modal-display-area">\n    <h2>Widget Error</h2>\n    <p>Error received when loading widget data:</p>\n    <p class="pre">',(i=n.errorMessage)?i=i.call(t,{hash:{},data:l}):(i=t.errorMessage,i=typeof i===r?i.apply(t):i),s+=o(i)+'</p>\n    <a href="#" class="btn confirm">',(i=n.confirmText)?i=i.call(t,{hash:{},data:l}):(i=t.confirmText,i=typeof i===r?i.apply(t):i),s+=o(i)+"</a>\n  </div>\n</div>\n"}),this.GB.templates.dashboardAdminBar=Handlebars.template(function(e,t,n,a,l){function i(){return'\n    <a id="add-widget" class="btn" href="#">Add widget</a>\n  '}function s(){return'\n    <span id="read-only-label">Read only</span>\n  '}function r(e,t){var a,l="";return l+='\n      <div id="dashboard-settings" class="toggle-menu">\n        <a class="btn" href="#">\n          <span></span>\n        </a>\n\n        <nav class="menu-options" data-menuctx="dashboard">\n          <ul>\n            <li><a href="" id="dash-settings-general">General settings</a></li>\n            <li><a href="" id="dash-settings-copy">Copy dashboard</a></li>\n            ',a=n["if"].call(e,e.showDeleteButton,{hash:{},inverse:d.noop,fn:d.program(6,o,t),data:t}),(a||0===a)&&(l+=a),l+='\n            <!-- /*\n              <li><a href="" id="dash-settings-display">Display settings</a></li>\n              <li><a href="" id="dash-settings-accounts">Accounts</a></li>\n              <li><a href="" id="dash-settings-users">Users</a></li>\n              <li><a href="" id="dash-settings-templates">Templates</a></li>\n            */ -->\n          </ul>\n        </nav>\n      </div>\n      <div id="sharing-url-menu" class="toggle-menu">\n        <a class="btn" href="#">\n          <span class="sharing"></span>\n        </a>\n        <nav id="sharing-url-menu-nav" class="menu-options" data-menuctx="sharing-url">\n          <ul>\n            <li class="label">Sharing URL</li>\n            <li class="control">\n              <div class="url">\n                <input type="text" value="URL here" readyonly>\n              </div>\n              <span class="sharing-lock sharing-action" title="Toggle sharing">\n              </span>\n              <span class="sharing-regenerate sharing-action" title="Regenerate sharing URL">\n              </span>\n            </li>\n          </ul>\n        </nav>\n      </div>\n    '}function o(){return'\n              <li><a href="" id="dash-settings-delete">Delete dashboard</a></li>\n            '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var c,h="",d=this;return h+='<div class="inner dashboard-sized-el">\n  ',c=n["if"].call(t,t.canEdit,{hash:{},inverse:d.program(3,s,l),fn:d.program(1,i,l),data:l}),(c||0===c)&&(h+=c),h+='\n\n  <section id="dashboard-admin">\n    <div class="float-fix">\n      <span>Dashboard:</span>\n    </div>\n\n    <div id="switch-dashboard" class="btn"></div>\n\n    ',c=n["if"].call(t,t.canEdit,{hash:{},inverse:d.noop,fn:d.program(5,r,l),data:l}),(c||0===c)&&(h+=c),h+='\n  </section><!-- #dashboard-admin -->\n</div><!-- .inner -->\n\n<a id="toggle-header" href="#"></a>\n'}),this.GB.templates.dashboardConfigModal=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+='\n      <section class="dashboard-templates">\n        <h3>Template:</h3>\n        <p>\n          We offer a range of templates to build a pre-defined dashboard for a\n          specific service, or pick ‘Blank dashboard’ if you want to start a\n          fresh.\n        </p>\n\n        <ul>\n          ',a=n.each.call(e,e.templates,{hash:{},inverse:h.noop,fn:h.program(2,s,t),data:t}),(a||0===a)&&(l+=a),l+='\n          <li>\n            <a class="dashboard-template',a=n.unless.call(e,e.hasSelectedTemplate,{hash:{},inverse:h.noop,fn:h.program(3,r,t),data:t}),(a||0===a)&&(l+=a),l+='" href="#" data-id="0">\n              <span class="template-image blank"></span>\n              <span>Blank dashboard</span>\n            </a>\n          </li>\n        </ul>\n      </section>\n    '
}function s(e,t){var a,l="";return l+='\n            <li>\n              <a class="dashboard-template',a=n["if"].call(e,e.selected,{hash:{},inverse:h.noop,fn:h.program(3,r,t),data:t}),(a||0===a)&&(l+=a),l+='" href="#" data-id="',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===d?a.apply(e):a),l+=p(a)+'">\n                <img class="template-image" src="',(a=n.imageURL)?a=a.call(e,{hash:{},data:t}):(a=e.imageURL,a=typeof a===d?a.apply(e):a),l+=p(a)+'" alt="',(a=n.name)?a=a.call(e,{hash:{},data:t}):(a=e.name,a=typeof a===d?a.apply(e):a),l+=p(a)+' dashboard template icon">\n                <span>',(a=n.name)?a=a.call(e,{hash:{},data:t}):(a=e.name,a=typeof a===d?a.apply(e):a),l+=p(a)+"</span>\n              </a>\n            </li>\n          "}function r(){return" active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var o,c="",h=this,d="function",p=this.escapeExpression;return c+='<div class="inner">\n  <div class="modal-display-area">\n    <h2>Configure Dashboard</h2>\n    <div class="error"></div>\n\n    ',o=n["if"].call(t,t.showTemplates,{hash:{},inverse:h.noop,fn:h.program(1,i,l),data:l}),(o||0===o)&&(c+=o),c+='\n\n    <div class="form-wrapper"></div>\n\n    <a href="#" class="btn confirm">',(o=n.confirmText)?o=o.call(t,{hash:{},data:l}):(o=t.confirmText,o=typeof o===d?o.apply(t):o),c+=p(o)+'</a>\n    <a href="#" class="btn cancel">Cancel</a>\n  </div>\n</div>\n'}),this.GB.templates.dashboardCopyModal=Handlebars.template(function(e,t,n,a,l){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{},'<div class="inner">\n  <div class="modal-display-area copy">\n    <h2>Copy Dashboard</h2>\n    <div class="error"></div>\n    <!-- settings form added from view -->\n  </div>\n</div>\n'}),this.GB.templates.dashboardSelect=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+='\n      <div id="dashboard-',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===p?a.apply(e):a),l+=u(a)+'" class="dashboard-switcher" data-dashboard-id="',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===p?a.apply(e):a),l+=u(a)+'">',(a=n.title)?a=a.call(e,{hash:{},data:t}):(a=e.title,a=typeof a===p?a.apply(e):a),l+=u(a)+"</div>\n    "}function s(){return'\n      <div class="btn-add-dashboard">[Add new dashboard]</div>\n    '}function r(){return'\n      <div class="btn-upgrade-plan"><a href="/account/plan/">Upgrade for more dashboards</a></div>\n    '}function o(){return" btn-active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var c,h,d="",p="function",u=this.escapeExpression,f=this;return d+='<label>Select Dashboard</label>\n<div class="b-switch-dash">\n  <div class="active" id="dashboard-'+u((c=t.active,c=null==c||c===!1?c:c.id,typeof c===p?c.apply(t):c))+'">'+u((c=t.active,c=null==c||c===!1?c:c.title,typeof c===p?c.apply(t):c))+'</div>\n  <div class="list">\n    ',h=n.each.call(t,t.dashboards,{hash:{},inverse:f.noop,fn:f.program(1,i,l),data:l}),(h||0===h)&&(d+=h),d+="\n    ",h=n.each.call(t,t.slots,{hash:{},inverse:f.noop,fn:f.program(3,s,l),data:l}),(h||0===h)&&(d+=h),d+="\n    ",h=n["if"].call(t,t.free_plan,{hash:{},inverse:f.noop,fn:f.program(5,r,l),data:l}),(h||0===h)&&(d+=h),d+='\n  </div>\n</div>\n<input type="submit" value="" id="btn-cycle-dashboard" class="button btn-st btn-switch-dashboard btn-disable',h=n["if"].call(t,t.looping,{hash:{},inverse:f.noop,fn:f.program(7,o,l),data:l}),(h||0===h)&&(d+=h),d+='">\n'}),this.GB.templates.dashboardSelector=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+='\n      <li><a href="#" class="dashboard" data-id="',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===u?a.apply(e):a),l+=f(a)+'">',(a=n.title)?a=a.call(e,{hash:{},data:t}):(a=e.title,a=typeof a===u?a.apply(e):a),l+=f(a)+"</a></li>\n    "}function s(e,t){var a,l="";return l+="\n      ",a=n.each.call(e,e.groups,{hash:{},inverse:m.noop,fn:m.program(4,r,t),data:t}),(a||0===a)&&(l+=a),l+="\n    "}function r(e,t){var a,l="";return l+="\n        ",a=n["if"].call(e,e.hasDashboards,{hash:{},inverse:m.noop,fn:m.program(5,o,t),data:t}),(a||0===a)&&(l+=a),l+="\n      "}function o(e,t){var a,l="";return l+='\n          <li class="group">\n              <span class="group-name">',(a=n.name)?a=a.call(e,{hash:{},data:t}):(a=e.name,a=typeof a===u?a.apply(e):a),l+=f(a)+"</span>\n            <ul>\n              ",a=n.each.call(e,e.dashboards,{hash:{},inverse:m.noop,fn:m.program(6,c,t),data:t}),(a||0===a)&&(l+=a),l+="\n            </ul>\n          </li>\n        "}function c(e,t){var a,l="";return l+='\n              <li><a class="dashboard" href="/edit/dashboards/',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===u?a.apply(e):a),l+=f(a)+'" data-id="',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===u?a.apply(e):a),l+=f(a)+'">',(a=n.title)?a=a.call(e,{hash:{},data:t}):(a=e.title,a=typeof a===u?a.apply(e):a),l+=f(a)+"</a></li>\n              "}function h(){return'\n    <a id="add-new-dashboard" class="dashboard" href="#" data-id="0"><span>Add dashboard</span></a>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var d,p="",u="function",f=this.escapeExpression,m=this;return p+='<span id="selected-dashboard-title">',(d=n.currentDashboardTitle)?d=d.call(t,{hash:{},data:l}):(d=t.currentDashboardTitle,d=typeof d===u?d.apply(t):d),p+=f(d)+'</span>\n\n<div id="dashboard-selection-list">\n  <ul>\n    ',d=n.each.call(t,t.dashboards,{hash:{},inverse:m.noop,fn:m.program(1,i,l),data:l}),(d||0===d)&&(p+=d),p+="\n\n    ",d=n["if"].call(t,t.showGroups,{hash:{},inverse:m.noop,fn:m.program(3,s,l),data:l}),(d||0===d)&&(p+=d),p+="\n  </ul>\n\n  ",d=n["if"].call(t,t.canAddDashboard,{hash:{},inverse:m.noop,fn:m.program(8,h,l),data:l}),(d||0===d)&&(p+=d),p+="\n</div>\n"}),this.GB.templates.dashboardTemplateConfigModal=Handlebars.template(function(e,t,n,a,l){function i(){return'\n        <div class="configure-template"></div>\n      '}function s(){return'\n          <div class="service-accounts"></div>\n        </section>\n        <section>\n          <div class="configure-template"></div>\n      '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var r,o="",c="function",h=this.escapeExpression,d=this;return o+='<div class="inner">\n  <div class="modal-display-area ',(r=n.modalClass)?r=r.call(t,{hash:{},data:l}):(r=t.modalClass,r=typeof r===c?r.apply(t):r),o+=h(r)+'">\n    <section class="account-info">\n      <h2>Create ',(r=n.templateName)?r=r.call(t,{hash:{},data:l}):(r=t.templateName,r=typeof r===c?r.apply(t):r),o+=h(r)+' template</h2>\n      <div class="error"></div>\n\n      ',r=n["if"].call(t,t.showConnectScreen,{hash:{},inverse:d.program(3,s,l),fn:d.program(1,i,l),data:l}),(r||0===r)&&(o+=r),o+='\n\n      <a href="#" class="btn confirm ',(r=n.confirmClass)?r=r.call(t,{hash:{},data:l}):(r=t.confirmClass,r=typeof r===c?r.apply(t):r),o+=h(r)+'">',(r=n.confirmText)?r=r.call(t,{hash:{},data:l}):(r=t.confirmText,r=typeof r===c?r.apply(t):r),o+=h(r)+'</a>\n      <a href="#" class="btn cancel">Cancel</a>\n    </section>\n  </div>\n</div>\n'}),this.GB.templates.newUserSplashScreen=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var i,s="",r="function",o=this.escapeExpression;return s+='<div class="inner new-user-splash-screen">\n  <div class="modal-display-area">\n    <h2>Welcome to your new Geckoboard!</h2>\n\n    <section class="introduction">\n      <p>\n        Hey ',(i=n.username)?i=i.call(t,{hash:{},data:l}):(i=t.username,i=typeof i===r?i.apply(t):i),s+=o(i)+', welcome to your first Geckoboard Dashboard. It&#39;s a\n        bit plain at the moment, let&#39;s get it filled up with your data! Your\n        Dashboard is made up of a series of &#8220;widgets&#8221; which connect\n        to the service you want to display. We&#39;ve tried to make adding\n        widgets as easy as possible but if you get stuck look out for the\n        <span class="help-icon">help</span> icon. Let&#39;s get started shall we?\n      </p>\n\n      <a href="#" class="btn confirm">Okay, let&#39;s add my first widget!</a>\n      <a href="#" class="btn cancel">No thanks, I&#39;ll explore myself</a>\n\n        <section class="create-dashboard-from-template">\n          <p>\n            Or, we offer a range of pre-built Dashboard templates to help you\n            get started!\n          </p>\n\n          <a href="#" class="btn confirm create-dashboard">\n            Sounds good, create my dashboard from a template\n          </a>\n        </section>\n    </section>\n  </div>\n</div>\n'}),this.GB.templates.serviceSearchResults=Handlebars.template(function(e,t,n,a,l){function i(e,t,a){var l,i,r="";return r+='\n  <li>\n    <a class="service',l=n["if"].call(e,e.active,{hash:{},inverse:c.noop,fn:c.program(2,s,t),data:t}),(l||0===l)&&(r+=l),r+='" href="#" data-id="',(l=n.id)?l=l.call(e,{hash:{},data:t}):(l=e.id,l=typeof l===h?l.apply(e):l),r+=d(l)+'">\n      <img width="48" height="48" src="'+d((l=a.serviceImageURL,typeof l===h?l.apply(e):l)),(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===h?i.apply(e):i),r+=d(i)+'.png">\n      ',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===h?i.apply(e):i),r+=d(i)+"\n    </a>\n  </li>\n"}function s(){return" active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var r,o="",c=this,h="function",d=this.escapeExpression;return r=n.each.call(t,t.services,{hash:{},inverse:c.noop,fn:c.programWithDepth(1,i,l,t),data:l}),(r||0===r)&&(o+=r),o+="\n"}),this.GB.templates.servicesPane=Handlebars.template(function(e,t,n,a,l){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{},'<header>\n  <form id="search-services" action="" method="get">\n    <div class="field-wrapper">\n      <input id="service-search-field" type="text" name="service" placeholder="search services" value="" autofocus>\n    </div>\n  </form>\n\n  <div class="filter">\n    <div class="selected">\n      <a id="service-filter-option" href="#" data-filter="total">All services (<span>0</span>)</a>\n    </div>\n\n    <ul>\n      <li><a class="service-search-filter active" href="#" data-filter="total">All services (<span>0</span>)</a></li>\n      <li><a class="service-search-filter" href="#" data-filter="connected">Connected services (<span>0</span>)</a></li>\n      <li><a class="service-search-filter" href="#" data-filter="inuse">Services in use (<span>0</span>)</a></li>\n    </ul>\n  </div>\n</header>\n\n<ul class="option-list" id="service-results"></ul>\n'}),this.GB.templates.signupChecklist=Handlebars.template(function(e,t,n,a,l){function i(){return" complete"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var s,r,o="",c="function",h=this.escapeExpression,d=this;return o+='<a class="btn" href="/account/signup-checklist"><span></span></a>\n<div class="checklist-dropdown menu-options" data-menuctx="checklist">\n  <header class="checklist-breakdown">\n    <div class="checklist-chart"></div>\n    <p>\n      You&#39;ve completed ',(s=n.completeTaskCount)?s=s.call(t,{hash:{},data:l}):(s=t.completeTaskCount,s=typeof s===c?s.apply(t):s),o+=h(s)+" of our list of\n      ",(s=n.totalTaskCount)?s=s.call(t,{hash:{},data:l}):(s=t.totalTaskCount,s=typeof s===c?s.apply(t):s),o+=h(s)+' actions to help you get the best from Geckoboard.\n    </p>\n  </header>\n\n  <section class="checklist">\n    <ol>\n      <li class="task',r=n["if"].call(t,(s=t.checklist,null==s||s===!1?s:s.share_dashboard),{hash:{},inverse:d.noop,fn:d.program(1,i,l),data:l}),(r||0===r)&&(o+=r),o+='">\n        <h3>Share Dashboard</h3>\n        <p>\n          Activate and generate a sharing URL to share your dashboard.\n        </p>\n      </li>\n\n      <li class="task',r=n["if"].call(t,(s=t.checklist,null==s||s===!1?s:s.add_three_widgets),{hash:{},inverse:d.noop,fn:d.program(1,i,l),data:l}),(r||0===r)&&(o+=r),o+='">\n        <h3>Add 3 widgets</h3>\n        <p>\n          Add 3 widgets from different services to your Geckoboard.\n        </p>\n      </li>\n\n      <li class="task',r=n["if"].call(t,(s=t.checklist,null==s||s===!1?s:s.add_second_dashboard),{hash:{},inverse:d.noop,fn:d.program(1,i,l),data:l}),(r||0===r)&&(o+=r),o+='">\n        <h3>Add a dashboard</h3>\n        <p>\n          Add a second dashboard to your Geckoboard account.\n        </p>\n      </li>\n    </ol>\n  </section>\n\n  <footer>\n    <a href="/account/signup-checklist">View full list</a>\n  </footer>\n</div>\n'}),this.GB.templates.topWidgetTypes=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+='\n  <article class="widget-type-preview">\n    <header>\n      <h3>',(a=n.title)?a=a.call(e,{hash:{},data:t}):(a=e.title,a=typeof a===o?a.apply(e):a),l+=c(a)+'</h3>\n      <a href="#" data-id="',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===o?a.apply(e):a),l+=c(a)+'" class="add-widget-type">Add this widget</a>\n    </header>\n    <aside class="preview">\n      <a href= "#" class="add-widget-type" data-id=',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===o?a.apply(e):a),l+=c(a)+'>\n        <img src="',(a=n.imageURL)?a=a.call(e,{hash:{},data:t}):(a=e.imageURL,a=typeof a===o?a.apply(e):a),l+=c(a)+'">\n      </a>\n    </aside>\n  </article>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var s,r="",o="function",c=this.escapeExpression,h=this;return r+="<h2>Adding a widget</h2>\n<p>\n  Your Geckoboard experience starts with widgets. These are the little boxes that display data from\n  the services you select, such as Google Analytics, Salesforce and Basecamp. On the left is a list of\n  all of our supported services. Pick the one you want to add to your Geckoboard to get started.\n</p>\n<p>\n  You can also use your own data or that from services that we don't support, with our Custom Widgets\n  API. These are listed under 'Custom Widgets'. This is a bit more complicated though, so we recommend\n  you check out our <a href=\"http://www.geckoboard.com/developers/\">developer documentation</a> to get going.\n</p>\n\n<h2>Example widgets</h2>\n<p>\nGoogle Analytics is one of the most popular services that people connect to their Geckoboards, so\nwe've included a couple of example widgets below to give you an idea. Click 'Add this widget' and\nyou'll be taken to the configuration screen where you can connect up your Google Analytics account\nand setup your widget.\n</p>\n\n",s=n.each.call(t,t.widgetTypes,{hash:{},inverse:h.noop,fn:h.program(1,i,l),data:l}),(s||0===s)&&(r+=s),r+="\n"}),this.GB.templates.widgetConfigPane=Handlebars.template(function(e,t,n,a,l){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{},'<div class="form-wrapper"></div>\n'}),this.GB.templates.widgetMessage=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+='\n  <div class="widget-inner ',(a=n.sizeClass)?a=a.call(e,{hash:{},data:t}):(a=e.sizeClass,a=typeof a===m?a.apply(e):a),l+=g(a),a=n["if"].call(e,e.isLarge,{hash:{},inverse:v.noop,fn:v.program(2,s,t),data:t}),(a||0===a)&&(l+=a),l+='">\n    <section class="widget-body ',(a=n.bodyClass)?a=a.call(e,{hash:{},data:t}):(a=e.bodyClass,a=typeof a===m?a.apply(e):a),l+=g(a)+'">\n      <div class="inner">\n          <a class="led ',a=n["if"].call(e,e.ledClass,{hash:{},inverse:v.program(6,o,t),fn:v.program(4,r,t),data:t}),(a||0===a)&&(l+=a),l+='" href="#"></a>\n        <ol class="slides with-led">\n          <li class="t-secondary">',(a=n.message)?a=a.call(e,{hash:{},data:t}):(a=e.message,a=typeof a===m?a.apply(e):a),(a||0===a)&&(l+=a),l+="</li>\n        </ol>\n      </div>\n    </section>\n    ",a=n.unless.call(e,e.isPublic,{hash:{},inverse:v.noop,fn:v.program(8,c,t),data:t}),(a||0===a)&&(l+=a),l+="\n  </div>\n"}function s(){return" large-screen"}function r(e,t){var a;return(a=n.ledClass)?a=a.call(e,{hash:{},data:t}):(a=e.ledClass,a=typeof a===m?a.apply(e):a),g(a)}function o(){return"success"}function c(){return'\n      <aside>\n        <ul class="widget-actions">\n          <li><a href="#" class="edit"></a></li>\n          <li><a href="#" class="copy"></a></li>\n          <li><a href="#" class="delete"></a></li>\n        </ul>\n      </aside>\n    '}function h(e,t){var l,i="";return i+="\n  ",l=v.invokePartial(a.widgetHeader,"widgetHeader",e,n,a,t),(l||0===l)&&(i+=l),i+='\n    <div class="widget-message t-secondary">\n      ',l=n["if"].call(e,e.customWidgetError,{hash:{},inverse:v.program(13,p,t),fn:v.program(11,d,t),data:t}),(l||0===l)&&(i+=l),i+="\n    </div>\n  ",l=v.invokePartial(a.widgetFooter,"widgetFooter",e,n,a,t),(l||0===l)&&(i+=l),i+="\n"}function d(e,t){var a,l="";return l+='\n        <p>\n          Loading failed.\n        <br />\n          <a href="#" class="custom-error-message" data-error-message="',(a=n.errorMessage)?a=a.call(e,{hash:{},data:t}):(a=e.errorMessage,a=typeof a===m?a.apply(e):a),l+=g(a)+'">Click here to see the error<a/>.\n        </p>\n      '}function p(e,t){var a,l="";return l+="\n        ",(a=n.message)?a=a.call(e,{hash:{},data:t}):(a=e.message,a=typeof a===m?a.apply(e):a),(a||0===a)&&(l+=a),l+="\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var u,f="",m="function",g=this.escapeExpression,v=this;return u=n["if"].call(t,t.isFullWidth,{hash:{},inverse:v.program(10,h,l),fn:v.program(1,i,l),data:l}),(u||0===u)&&(f+=u),f+="\n"}),this.GB.templates.widgetTypesPane=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+='\n      <li>\n        <a href="#"\n          class="widget-type',a=n["if"].call(e,e.active,{hash:{},inverse:c.noop,fn:c.program(2,s,t),data:t}),(a||0===a)&&(l+=a),l+='"\n          data-id="',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===h?a.apply(e):a),l+=d(a)+'"\n          title="',(a=n.description)?a=a.call(e,{hash:{},data:t}):(a=e.description,a=typeof a===h?a.apply(e):a),l+=d(a)+'">\n          ',(a=n.title)?a=a.call(e,{hash:{},data:t}):(a=e.title,a=typeof a===h?a.apply(e):a),l+=d(a)+"\n        </a>\n      </li>\n    "}function s(){return" active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var r,o="",c=this,h="function",d=this.escapeExpression;return o+='<div class="scroll-pane">\n  <ul id=\'widget-type-list\' class="option-list">\n    ',r=n.each.call(t,t.widgetTypes,{hash:{},inverse:c.noop,fn:c.program(1,i,l),data:l}),(r||0===r)&&(o+=r),o+="\n  </ul>\n</div>\n"}),this.GB.templates.widgetTypesPreview=Handlebars.template(function(e,t,n,a,l){function i(e,t,a){var l,i,s="";return s+='\n  <article class="widget-type-preview">\n    <header>\n      <h3>',(l=n.title)?l=l.call(e,{hash:{},data:t}):(l=e.title,l=typeof l===o?l.apply(e):l),s+=c(l)+'</h3>\n      <p class="description">',(l=n.description)?l=l.call(e,{hash:{},data:t}):(l=e.description,l=typeof l===o?l.apply(e):l),s+=c(l)+'</p>\n      <a href="#" data-id="',(l=n.id)?l=l.call(e,{hash:{},data:t}):(l=e.id,l=typeof l===o?l.apply(e):l),s+=c(l)+'" class="add-widget-type">'+c((l=a.action,typeof l===o?l.apply(e):l))+' this widget</a>\n    </header>\n    <aside class="preview">\n      <a  href="#" data-id="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===o?i.apply(e):i),s+=c(i)+'" class="add-widget-type">\n        <img src="',(i=n.imageURL)?i=i.call(e,{hash:{},data:t}):(i=e.imageURL,i=typeof i===o?i.apply(e):i),s+=c(i)+'">\n      </a>\n    </aside>\n  </article>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var s,r="",o="function",c=this.escapeExpression,h=this;return r+="<h2>Select a Widget</h2>\n<p>\n  Listed are the available widgets for this selected service, with images illustrating how your\n  widget might look. Click 'Add this Widget' and you can then configure the widget to your needs.\n</p>\n",s=n.each.call(t,t.widgetTypes,{hash:{},inverse:h.noop,fn:h.programWithDepth(1,i,l,t),data:l}),(s||0===s)&&(r+=s),r+="\n"}),this.GB.templates.widget_bulletchart=Handlebars.template(function(e,t,n,a,l){function i(e,t,a){var l,i,r="";return r+='\n<div class="graph '+m((l=a.orientation,typeof l===f?l.apply(e):l))+'">\n    <div class="graph-name">\n      <span class="t-size-x18 t-main">',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===f?i.apply(e):i),r+=m(i)+'</span>\n      <span class="t-size-x11 t-secondary">',(i=n.subLabel)?i=i.call(e,{hash:{},data:t}):(i=e.subLabel,i=typeof i===f?i.apply(e):i),r+=m(i)+'</span>\n    </div>\n    <div class="graph-body">\n      <div class="graph-ind">\n        ',i=n["if"].call(e,e.measure,{hash:{},inverse:g.noop,fn:g.programWithDepth(2,s,t,a),data:t}),(i||0===i)&&(r+=i),r+="\n        ",i=n.each.call(e,e.comparative,{hash:{},inverse:g.noop,fn:g.programWithDepth(6,c,t,a),data:t}),(i||0===i)&&(r+=i),r+="\n        ",i=n.each.call(e,e.range,{hash:{},inverse:g.noop,fn:g.programWithDepth(8,h,t,a),data:t}),(i||0===i)&&(r+=i),r+='\n      </div>\n      <div class="graph-scale t-secondary">\n        <ul class="p-'+m((l=e.axis,l=null==l||l===!1?l:l.length,typeof l===f?l.apply(e):l))+'">\n          ',i=n.each.call(e,e.axis,{hash:{},inverse:g.noop,fn:g.program(10,d,t),data:t}),(i||0===i)&&(r+=i),r+="\n        </ul>\n      </div>\n    </div>\n  </div>\n"}function s(e,t,a){var l,i,s="";return s+='\n          <div class="graph-bar" style="'+m((l=a.dimension,typeof l===f?l.apply(e):l))+":"+m((l=e.measure,l=null==l||l===!1?l:l.width,typeof l===f?l.apply(e):l))+"px; "+m((l=a.position,typeof l===f?l.apply(e):l))+":"+m((l=e.measure,l=null==l||l===!1?l:l.left,typeof l===f?l.apply(e):l))+'px;">\n              ',i=n["if"].call(e,(l=e.measure,null==l||l===!1?l:l.bar),{hash:{},inverse:g.noop,fn:g.programWithDepth(3,r,t,a),data:t}),(i||0===i)&&(s+=i),s+="\n          </div>\n        "}function r(e,t,a){var l,i,s="";return s+='\n                <span class="graph-measure" style="'+m((l=a.dimension,typeof l===f?l.apply(e):l))+":"+m((l=e.measure,l=null==l||l===!1?l:l.bar,typeof l===f?l.apply(e):l))+"px;",i=n["if"].call(e,a.isHorz,{hash:{},inverse:g.noop,fn:g.program(4,o,t),data:t}),(i||0===i)&&(s+=i),s+='"></span>\n              '}function o(){return" float: left"}function c(e,t,n){var a,l="";return l+='\n          <div class="graph-line" style="'+m((a=n.position,typeof a===f?a.apply(e):a))+":"+m(typeof e===f?e.apply(e):e)+'px;"></div>\n        '}function h(e,t,a){var l,i,s="";return s+='\n          <div class="ind ind-',(l=n.color)?l=l.call(e,{hash:{},data:t}):(l=e.color,l=typeof l===f?l.apply(e):l),s+=m(l)+'" style="'+m((l=a.dimension,typeof l===f?l.apply(e):l))+":",(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),s+=m(i)+'px;"></div>\n        '}function d(e){var t="";return t+="\n            <li>"+m(typeof e===f?e.apply(e):e)+"</li>\n          "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var p,u="",f="function",m=this.escapeExpression,g=this;return p=g.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(p||0===p)&&(u+=p),u+="\n",p=n.each.call(t,t.results,{hash:{},inverse:g.noop,fn:g.programWithDepth(1,i,l,t),data:l}),(p||0===p)&&(u+=p),u+="\n",p=g.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(p||0===p)&&(u+=p),u+="\n"}),this.GB.templates.widget_clock=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var i,s="",r=this,o="function",c=this.escapeExpression;return i=r.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(i||0===i)&&(s+=i),s+='\n  <time class="time t-size-x',(i=n.timeSize)?i=i.call(t,{hash:{},data:l}):(i=t.timeSize,i=typeof i===o?i.apply(t):i),s+=c(i)+'"></time>\n\n  <time class="date t-secondary t-size-x',(i=n.dateSize)?i=i.call(t,{hash:{},data:l}):(i=t.dateSize,i=typeof i===o?i.apply(t):i),s+=c(i)+'">\n    <span class="day"></span>\n    <span class="full-date"></span>\n  </time>\n',i=r.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(i||0===i)&&(s+=i),s+="\n"}),this.GB.templates.widget_funnelchart=Handlebars.template(function(e,t,n,a,l){function i(e,t,a){var l,i,r="";return r+='\n      <li class="clear">\n        <div class="indicator">\n          <div class="inner" style="background-color: #',(l=n.color)?l=l.call(e,{hash:{},data:t}):(l=e.color,l=typeof l===c?l.apply(e):l),r+=h(l)+"; width: ",(l=n.width)?l=l.call(e,{hash:{},data:t}):(l=e.width,l=typeof l===c?l.apply(e):l),r+=h(l)+"%; height: "+h((l=a.barHeight,typeof l===c?l.apply(e):l))+'px"></div>\n        </div>\n\n        <div class="value">\n          <span class="main">',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===c?i.apply(e):i),r+=h(i),i=n["if"].call(e,a.showPercentage,{hash:{},inverse:d.noop,fn:d.program(2,s,t),data:t}),(i||0===i)&&(r+=i),r+='</span>\n          <span class="t-secondary">',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===c?i.apply(e):i),r+=h(i)+"</span>\n        </div>\n      </li>\n    "}function s(e,t){var a,l="";return l+=" (",(a=n.percentage)?a=a.call(e,{hash:{},data:t}):(a=e.percentage,a=typeof a===c?a.apply(e):a),l+=h(a)+"%)"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var r,o="",c="function",h=this.escapeExpression,d=this;return r=d.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(r||0===r)&&(o+=r),o+="\n  <ul>\n    ",r=n.each.call(t,t.results,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,i,l,t),data:l}),(r||0===r)&&(o+=r),o+="\n  </ul>\n",r=d.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(r||0===r)&&(o+=r),o+="\n"}),this.GB.templates.widget_geckometer=Handlebars.template(function(e,t,n,a,l){function i(){return"positive"}function s(){return"negative"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var r,o="",c=this,h="function",d=this.escapeExpression;return r=c.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(r||0===r)&&(o+=r),o+='\n  <div class="value t-size-',(r=n.size)?r=r.call(t,{hash:{},data:l}):(r=t.size,r=typeof r===h?r.apply(t):r),o+=d(r)+'">',(r=n.value)?r=r.call(t,{hash:{},data:l}):(r=t.value,r=typeof r===h?r.apply(t):r),(r||0===r)&&(o+=r),o+='</div>\n  <div class="scale',(r=n.cbClass)?r=r.call(t,{hash:{},data:l}):(r=t.cbClass,r=typeof r===h?r.apply(t):r),o+=d(r)+'">\n    <div class="pointer-canvas',(r=n.cbClass)?r=r.call(t,{hash:{},data:l}):(r=t.cbClass,r=typeof r===h?r.apply(t):r),o+=d(r)+'">\n      <img class="pointer" src="',(r=n.assetHost)?r=r.call(t,{hash:{},data:l}):(r=t.assetHost,r=typeof r===h?r.apply(t):r),o+=d(r)+"icons/geckometer-pointer",(r=n.cbClass)?r=r.call(t,{hash:{},data:l}):(r=t.cbClass,r=typeof r===h?r.apply(t):r),o+=d(r)+'.png">\n    </div>\n  </div>\n  <div class="min">\n    <div class="t-size-',(r=n.valueSize)?r=r.call(t,{hash:{},data:l}):(r=t.valueSize,r=typeof r===h?r.apply(t):r),o+=d(r)+' t-secondary">',(r=n.labelMin)?r=r.call(t,{hash:{},data:l}):(r=t.labelMin,r=typeof r===h?r.apply(t):r),o+=d(r)+'</div>\n    <div class="t-size-',(r=n.valueSize)?r=r.call(t,{hash:{},data:l}):(r=t.valueSize,r=typeof r===h?r.apply(t):r),o+=d(r)+" ",r=n["if"].call(t,t.isReverse,{hash:{},inverse:c.program(3,s,l),fn:c.program(1,i,l),data:l}),(r||0===r)&&(o+=r),o+='">',(r=n.min)?r=r.call(t,{hash:{},data:l}):(r=t.min,r=typeof r===h?r.apply(t):r),o+=d(r)+'</div>\n  </div>\n  <div class="max">\n    <div class="t-size-',(r=n.valueSize)?r=r.call(t,{hash:{},data:l}):(r=t.valueSize,r=typeof r===h?r.apply(t):r),o+=d(r)+' t-secondary">',(r=n.labelMax)?r=r.call(t,{hash:{},data:l}):(r=t.labelMax,r=typeof r===h?r.apply(t):r),o+=d(r)+'</div>\n    <div class="t-size-',(r=n.valueSize)?r=r.call(t,{hash:{},data:l}):(r=t.valueSize,r=typeof r===h?r.apply(t):r),o+=d(r)+" ",r=n["if"].call(t,t.isReverse,{hash:{},inverse:c.program(1,i,l),fn:c.program(3,s,l),data:l}),(r||0===r)&&(o+=r),o+='">',(r=n.max)?r=r.call(t,{hash:{},data:l}):(r=t.max,r=typeof r===h?r.apply(t):r),o+=d(r)+"</div>\n  </div>\n",r=c.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(r||0===r)&&(o+=r),o+="\n"}),this.GB.templates.widget_highchart=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var i,s="",r=this;return i=r.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(i||0===i)&&(s+=i),s+="\n  <!-- Nothing to see here, move along -->\n",i=r.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(i||0===i)&&(s+=i),s+="\n"}),this.GB.templates.widget_list=Handlebars.template(function(e,t,n,a,l){function i(){return'\n  <div class="slides">\n'}function s(e,t,a){var l,i="";return i+='\n    <dl class="w-list">\n    ',l=n.each.call(e,e.items,{hash:{},inverse:m.noop,fn:m.programWithDepth(4,r,t,a),data:t}),(l||0===l)&&(i+=l),i+="\n    </dl>\n  "}function r(e,t,a){var l,i,s="";return s+='            \n      <dt class="t-size-x18',i=n["if"].call(e,(l=e.title,null==l||l===!1?l:l.highlight),{hash:{},inverse:m.noop,fn:m.program(5,o,t),data:t}),(i||0===i)&&(s+=i),s+='">\n        ',i=n["if"].call(e,e.hasLabel,{hash:{},inverse:m.noop,fn:m.program(7,c,t),data:t}),(i||0===i)&&(s+=i),s+="\n        ",l=e.title,l=null==l||l===!1?l:l.text,i=typeof l===u?l.apply(e):l,(i||0===i)&&(s+=i),s+='\n      </dt>\n      <dd class="t-size-'+f((l=a.descriptionSize,typeof l===u?l.apply(e):l))+'">',(i=n.description)?i=i.call(e,{hash:{},data:t}):(i=e.description,i=typeof i===u?i.apply(e):i),(i||0===i)&&(s+=i),s+="</dd>\n    "}function o(){return" highlight"}function c(e){var t,n,a="";return a+='\n          <span class="w-label" style="background-color:',t=e.label,t=null==t||t===!1?t:t.color,n=typeof t===u?t.apply(e):t,(n||0===n)&&(a+=n),a+=';">'+f((t=e.label,t=null==t||t===!1?t:t.name,typeof t===u?t.apply(e):t))+"</span>\n        "}function h(e,t){var a,l="";return l+='\n  </div>\n  <div class="slide-pagination">\n    <div class="inner">\n      <span class="slide-tally">1</span> of ',(a=n.totalItems)?a=a.call(e,{hash:{},data:t}):(a=e.totalItems,a=typeof a===u?a.apply(e):a),l+=f(a)+"\n      <nav><!-- links added in view --></nav>\n    </div>\n  </div>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var d,p="",u="function",f=this.escapeExpression,m=this;return d=m.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(d||0===d)&&(p+=d),p+="\n",d=n["if"].call(t,t.moreThanOneItem,{hash:{},inverse:m.noop,fn:m.program(1,i,l),data:l}),(d||0===d)&&(p+=d),p+="\n  ",d=n.each.call(t,t.pages,{hash:{},inverse:m.noop,fn:m.programWithDepth(3,s,l,t),data:l}),(d||0===d)&&(p+=d),p+="\n",d=n["if"].call(t,t.moreThanOneItem,{hash:{},inverse:m.noop,fn:m.program(9,h,l),data:l}),(d||0===d)&&(p+=d),p+="\n",d=m.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(d||0===d)&&(p+=d),p+="\n"}),this.GB.templates.widget_map=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var i,s="",r=this,o="function",c=this.escapeExpression;return i=r.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(i||0===i)&&(s+=i),s+='\n  <div class="svgmap',(i=n.id)?i=i.call(t,{hash:{},data:l}):(i=t.id,i=typeof i===o?i.apply(t):i),s+=c(i)+'" id="svgmap',(i=n.id)?i=i.call(t,{hash:{},data:l}):(i=t.id,i=typeof i===o?i.apply(t):i),s+=c(i)+'" style="',(i=n.mapStyle)?i=i.call(t,{hash:{},data:l}):(i=t.mapStyle,i=typeof i===o?i.apply(t):i),s+=c(i)+'"></div>\n',i=r.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(i||0===i)&&(s+=i),s+="\n"}),this.GB.templates.widget_monitoring=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var i,s="",r=this,o="function",c=this.escapeExpression;return i=r.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(i||0===i)&&(s+=i),s+='\n  <div class="status t-size-',(i=n.statusSize)?i=i.call(t,{hash:{},data:l}):(i=t.statusSize,i=typeof i===o?i.apply(t):i),s+=c(i)+" ",(i=n.statusClass)?i=i.call(t,{hash:{},data:l}):(i=t.statusClass,i=typeof i===o?i.apply(t):i),s+=c(i)+'">',(i=n.status)?i=i.call(t,{hash:{},data:l}):(i=t.status,i=typeof i===o?i.apply(t):i),s+=c(i)+'</div>\n  <div class="server-times">\n    <div class="server-time downtime">\n      <div class="label ',(i=n.secondaryTextClass)?i=i.call(t,{hash:{},data:l}):(i=t.secondaryTextClass,i=typeof i===o?i.apply(t):i),s+=c(i)+'">Last downtime</div>\n      <div class="t-size-',(i=n.secondaryStatSize)?i=i.call(t,{hash:{},data:l}):(i=t.secondaryStatSize,i=typeof i===o?i.apply(t):i),s+=c(i)+' t-main">',(i=n.downTime)?i=i.call(t,{hash:{},data:l}):(i=t.downTime,i=typeof i===o?i.apply(t):i),s+=c(i)+'</div>\n    </div>\n    <div class="server-time uptime">\n      <div class="label ',(i=n.secondaryTextClass)?i=i.call(t,{hash:{},data:l}):(i=t.secondaryTextClass,i=typeof i===o?i.apply(t):i),s+=c(i)+'">Response time</div>\n      <div class="t-size-',(i=n.secondaryStatSize)?i=i.call(t,{hash:{},data:l}):(i=t.secondaryStatSize,i=typeof i===o?i.apply(t):i),s+=c(i)+' t-main">',(i=n.responseTime)?i=i.call(t,{hash:{},data:l}):(i=t.responseTime,i=typeof i===o?i.apply(t):i),s+=c(i)+"</div>\n    </div>\n  </div>\n",i=r.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(i||0===i)&&(s+=i),s+="\n"
}),this.GB.templates.widget_number=Handlebars.template(function(e,t,n,a,l){function i(e){var t,n="";return n+=' title="'+M((t=e.widget,t=null==t||t===!1?t:t.attributes,t=null==t||t===!1?t:t.full,typeof t===S?t.apply(e):t))+'"'}function s(e,t){var a,l="";return l+='\n  <div class="t-secondary t-size-x',a=n["if"].call(e,e.isLargeTemplate,{hash:{},inverse:B.program(6,o,t),fn:B.program(4,r,t),data:t}),(a||0===a)&&(l+=a),l+='">',(a=n.valueSign)?a=a.call(e,{hash:{},data:t}):(a=e.valueSign,a=typeof a===S?a.apply(e):a),l+=M(a)+"</div>\n"}function r(){return"36"}function o(){return"24"}function c(e,t){var a,l="";return l+="\n  ",a=n["if"].call(e,e.chart,{hash:{},inverse:B.program(11,d,t),fn:B.program(9,h,t),data:t}),(a||0===a)&&(l+=a),l+="\n"}function h(e,t){var a,l="";return l+='\n    <div class="sparkline-wrapper">\n      <div class="sparkline"></div>\n      <span class="t-main sparkline-end-value">',(a=n.sparkEndValue)?a=a.call(e,{hash:{},data:t}):(a=e.sparkEndValue,a=typeof a===S?a.apply(e):a),(a||0===a)&&(l+=a),l+="</span>\n    </div>\n  "}function d(e,t){var a,l="";return l+="\n    ",a=n["if"].call(e,e.statGreaterThanZero,{hash:{},inverse:B.program(22,y,t),fn:B.program(12,p,t),data:t}),(a||0===a)&&(l+=a),l+="\n  "}function p(e,t){var a,l,i="";return i+='\n    <div class="secondary-stat t-size-'+M((a=e.cssClasses,a=null==a||a===!1?a:a.secondary,typeof a===S?a.apply(e):a))+" ",l=n["if"].call(e,e.dataTypeIsStandard,{hash:{},inverse:B.program(15,f,t),fn:B.program(13,u,t),data:t}),(l||0===l)&&(i+=l),i+=" arrow-up",l=n["if"].call(e,e.isLargeTemplate,{hash:{},inverse:B.program(19,g,t),fn:B.program(17,m,t),data:t}),(l||0===l)&&(i+=l),i+='">\n      <span>',a=e.stats,a=null==a||a===!1?a:a.secondary,l=typeof a===S?a.apply(e):a,(l||0===l)&&(i+=l),i+="</span>\n    </div>\n    "}function u(){return"positive"}function f(){return"negative"}function m(){return"-large"}function g(e,t){var a;return a=n["if"].call(e,e.isLarge,{hash:{},inverse:B.noop,fn:B.program(20,v,t),data:t}),a||0===a?a:""}function v(){return"-medium"}function y(e,t){var a,l="";return l+="\n      ",a=n["if"].call(e,e.statIsZero,{hash:{},inverse:B.program(25,L,t),fn:B.program(23,b,t),data:t}),(a||0===a)&&(l+=a),l+="\n    "}function b(e,t){var a,l,i="";return i+='\n      <div class="secondary-stat t-size-'+M((a=e.cssClasses,a=null==a||a===!1?a:a.secondary,typeof a===S?a.apply(e):a))+" level arrow-level",l=n["if"].call(e,e.isLargeTemplate,{hash:{},inverse:B.program(19,g,t),fn:B.program(17,m,t),data:t}),(l||0===l)&&(i+=l),i+='">\n          <span>',a=e.stats,a=null==a||a===!1?a:a.secondary,l=typeof a===S?a.apply(e):a,(l||0===l)&&(i+=l),i+="</span>\n        </div>\n      "}function L(e,t){var a,l,i="";return i+='\n        <div class="secondary-stat t-size-'+M((a=e.cssClasses,a=null==a||a===!1?a:a.secondary,typeof a===S?a.apply(e):a))+" ",l=n["if"].call(e,e.dataTypeIsStandard,{hash:{},inverse:B.program(13,u,t),fn:B.program(15,f,t),data:t}),(l||0===l)&&(i+=l),i+=" arrow-down",l=n["if"].call(e,e.isLargeTemplate,{hash:{},inverse:B.program(19,g,t),fn:B.program(17,m,t),data:t}),(l||0===l)&&(i+=l),i+='">\n          <span>',a=e.stats,a=null==a||a===!1?a:a.secondary,l=typeof a===S?a.apply(e):a,(l||0===l)&&(i+=l),i+="</span>\n        </div>\n      "}function w(e,t){var a,l="";return l+='\n  <div class="t-secondary ',a=n["if"].call(e,e.islarge,{hash:{},inverse:B.program(30,_,t),fn:B.program(28,x,t),data:t}),(a||0===a)&&(l+=a),l+='">\n    ',(a=n.statSign)?a=a.call(e,{hash:{},data:t}):(a=e.statSign,a=typeof a===S?a.apply(e):a),l+=M(a)+"\n  </div>\n"}function x(){return"t-size-x36"}function _(){return"t-size-x44"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var k,C,T="",S="function",M=this.escapeExpression,B=this;return k=B.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(k||0===k)&&(T+=k),T+='\n<div class="main-stat t-size-'+M((k=t.cssClasses,k=null==k||k===!1?k:k.value,typeof k===S?k.apply(t):k))+'"',C=n["if"].call(t,(k=t.widget,k=null==k||k===!1?k:k.attributes,null==k||k===!1?k:k.full),{hash:{},inverse:B.noop,fn:B.program(1,i,l),data:l}),(C||0===C)&&(T+=C),T+=">\n  ",k=t.stats,k=null==k||k===!1?k:k.num,C=typeof k===S?k.apply(t):k,(C||0===C)&&(T+=C),T+="\n</div>\n",C=n["if"].call(t,t.showItemText,{hash:{},inverse:B.noop,fn:B.program(3,s,l),data:l}),(C||0===C)&&(T+=C),T+="\n",C=n["if"].call(t,t.hasSecondary,{hash:{},inverse:B.noop,fn:B.program(8,c,l),data:l}),(C||0===C)&&(T+=C),T+="\n",C=n["if"].call(t,t.showItemText,{hash:{},inverse:B.noop,fn:B.program(27,w,l),data:l}),(C||0===C)&&(T+=C),T+="\n",C=B.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(C||0===C)&&(T+=C),T+="\n"}),this.GB.templates.widget_piechart_linechart=Handlebars.template(function(e,t,n,a,l){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var i,s="",r=this,o="function",c=this.escapeExpression;return i=r.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(i||0===i)&&(s+=i),s+='\n  <img src="',(i=n.chartSource)?i=i.call(t,{hash:{},data:l}):(i=t.chartSource,i=typeof i===o?i.apply(t):i),s+=c(i)+'">\n',i=r.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(i||0===i)&&(s+=i),s+="\n"}),this.GB.templates.widget_rag=Handlebars.template(function(e,t,n,a,l){function i(e){var t,n,a="";return a+='\n  <tr>\n    <td class="t-size-'+c((t=e.size,typeof t===o?t.apply(e):t))+" number "+c((t=e.displayClass,typeof t===o?t.apply(e):t))+'">\n      ',t=e.value,n=typeof t===o?t.apply(e):t,(n||0===n)&&(a+=n),a+='\n    </td>\n    <td class="t-secondary">'+c((t=e.text,typeof t===o?t.apply(e):t))+"</td>\n  </tr>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var s,r="",o="function",c=this.escapeExpression,h=this;return s=h.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(s||0===s)&&(r+=s),r+="\n<table>\n",s=n.each.call(t,t.results,{hash:{},inverse:h.noop,fn:h.program(1,i,l),data:l}),(s||0===s)&&(r+=s),r+="\n</table>\n",s=h.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(s||0===s)&&(r+=s),r+="\n"}),this.GB.templates.widget_ragcolumn=Handlebars.template(function(e,t,n,a,l){function i(e,t){var a,l="";return l+='\n  <div class="',(a=n.displayClass)?a=a.call(e,{hash:{},data:t}):(a=e.displayClass,a=typeof a===c?a.apply(e):a),l+=h(a)+'" style="height:'+h((a=e.height,typeof a===c?a.apply(e):a))+'%"></div>\n  '}function s(e){var t,n,a="";return a+='\n    <tr>\n      <td class="t-size-'+h((t=e.size,typeof t===c?t.apply(e):t))+" number "+h((t=e.displayClass,typeof t===c?t.apply(e):t))+'">\n        ',t=e.value,n=typeof t===c?t.apply(e):t,(n||0===n)&&(a+=n),a+='\n      </td>\n      <td class="t-secondary">'+h((t=e.text,typeof t===c?t.apply(e):t))+"</td>\n    </tr>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var r,o="",c="function",h=this.escapeExpression,d=this;return r=d.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(r||0===r)&&(o+=r),o+='\n<div class="column">\n  ',r=n.each.call(t,t.results,{hash:{},inverse:d.noop,fn:d.program(1,i,l),data:l}),(r||0===r)&&(o+=r),o+="\n</div>\n<table>\n  ",r=n.each.call(t,t.results,{hash:{},inverse:d.noop,fn:d.program(3,s,l),data:l}),(r||0===r)&&(o+=r),o+="\n</table>\n",r=d.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(r||0===r)&&(o+=r),o+="\n"}),this.GB.templates.widget_text=Handlebars.template(function(e,t,n,a,l){function i(){return'\n  <div class="slides">\n'}function s(e){var t,n,a="";return a+='\n    <div class="slide t-size-x24 t-main" data-ribbontype="'+d((t=e.type,typeof t===h?t.apply(e):t))+'">\n      ',t=e.text,n=typeof t===h?t.apply(e):t,(n||0===n)&&(a+=n),a+="\n    </div>\n  "}function r(e,t){var a,l="";return l+='\n  </div>\n  <div class="slide-pagination">\n    <div class="inner">\n      <span class="slide-tally">1</span> of ',(a=n.totalItems)?a=a.call(e,{hash:{},data:t}):(a=e.totalItems,a=typeof a===h?a.apply(e):a),l+=d(a)+"\n      <nav><!-- links added in view --></nav>\n    </div>\n  </div>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=this.merge(a,e.partials),l=l||{};var o,c="",h="function",d=this.escapeExpression,p=this;return o=p.invokePartial(a.widgetHeader,"widgetHeader",t,n,a,l),(o||0===o)&&(c+=o),c+='\n<div class="slide-ribbon"></div>\n',o=n["if"].call(t,t.moreThanOneItem,{hash:{},inverse:p.noop,fn:p.program(1,i,l),data:l}),(o||0===o)&&(c+=o),c+="\n  ",o=n.each.call(t,t.items,{hash:{},inverse:p.noop,fn:p.program(3,s,l),data:l}),(o||0===o)&&(c+=o),c+="\n",o=n["if"].call(t,t.moreThanOneItem,{hash:{},inverse:p.noop,fn:p.program(5,r,l),data:l}),(o||0===o)&&(c+=o),c+="\n",o=p.invokePartial(a.widgetFooter,"widgetFooter",t,n,a,l),(o||0===o)&&(c+=o),c+="\n"}),this.GB.templates.widget_text_full_width=Handlebars.template(function(e,t,n,a,l){function i(){return" large-screen"}function s(e,t){var a,l="";return l+="\n          <li>",(a=n.text)?a=a.call(e,{hash:{},data:t}):(a=e.text,a=typeof a===h?a.apply(e):a),(a||0===a)&&(l+=a),l+="</li>\n        "}function r(){return'\n    <aside>\n      <ul class="widget-actions">\n        <li><a href="#" class="edit"></a></li>\n        <li><a href="#" class="copy"></a></li>\n        <li><a href="#" class="delete"></a></li>\n      </ul>\n    </aside>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),l=l||{};var o,c="",h="function",d=this.escapeExpression,p=this;return c+='<div class="widget-inner ',(o=n.sizeClass)?o=o.call(t,{hash:{},data:l}):(o=t.sizeClass,o=typeof o===h?o.apply(t):o),c+=d(o),o=n["if"].call(t,t.isLarge,{hash:{},inverse:p.noop,fn:p.program(1,i,l),data:l}),(o||0===o)&&(c+=o),c+='">\n  <section class="widget-body ',(o=n.bodyClass)?o=o.call(t,{hash:{},data:l}):(o=t.bodyClass,o=typeof o===h?o.apply(t):o),c+=d(o)+'">\n    <div class="inner">\n      <ol class="slides">\n        ',o=n.each.call(t,t.items,{hash:{},inverse:p.noop,fn:p.program(3,s,l),data:l}),(o||0===o)&&(c+=o),c+="\n      </ol>\n    </div>\n  </section>\n  ",o=n.unless.call(t,t.isPublic,{hash:{},inverse:p.noop,fn:p.program(5,r,l),data:l}),(o||0===o)&&(c+=o),c+="\n</div>\n"}),function(){var e,t={};GB.Pusher={connect:function(){e=new Pusher(GB.models.config.get("pusher").applicationKey)},subscribe:function(n){try{return e||this.connect(),t[n]=+new Date,e.subscribe(n)}catch(a){return GeckoErrorLog.notify({message:"Failed to subscribe to push channel: "+a.message,extraInfo:{channel:n,stack:a.stack}}),!1}},unsubscribe:function(n){if(e)try{e.unsubscribe(n),delete t[n],0===_.keys(t).length&&this.disconnect()}catch(a){GeckoErrorLog.notify({message:"Failed to unsubscribe from push channel: "+a.message,extraInfo:{channel:n,stack:a.stack}})}},disconnect:function(){e&&(e.disconnect(),e=null,t={})}}}(),function(){var e;GB.init=function(t){t=_.extend({loopMode:!1},t),this.registerOAuthReturnHandler=function(t){e=t},this.deRegisterOAuthReturnHandler=function(t){this.oauthHandler===t&&(e=null)},this.oauthFlowReturn=function(t,n,a){if(t&&e)try{return a?e.addAccountFailure(t,a):e.accountAdded(t,n),void 0}catch(l){}new GB.views.Notification({message:"There was an error connecting the service account",type:"error"})},GB.dashboardRouter=new GB.DashboardRouter,Backbone.history.start({pushState:!0,hashChange:!1})||GB.dashboardRouter.navigate("edit",{trigger:!0}),this.openAddWidgetScreen=function(e){var t=n;GB.views.addWidgetScreen=new GB.views.AddWidgetScreen,GB.views.addWidgetScreen.on("open",t.obscureDashboard,t).on("close",t.revealDashboard,t),GB.views.addWidgetScreen.render(e).open()};var n=function(){var e=$("#dashboard-wrapper"),t="obscured";return{obscureDashboard:function(){e.addClass(t)},revealDashboard:function(){e.removeClass(t),GB.views.addWidgetScreen.off(null,null,this)}}}();this.Tracker.init(this.models.user)}}(this),GB.push=function(){var e,t=!1,n=function(e){var t=+e.widget_id,n=GB.models.widgets.get(t);n||(n=GB.models.widgets.find(function(e){return e.get("id")===t})),n&&n.set("bustCache",!0,{silent:!0}).handleRefresh()};return{enable:function(){e=""+GB.models.config.get("dashboardId"),this.changeChannel()},enabled:function(){return t},disable:function(){e&&GB.Pusher.unsubscribe(e),t=!1},changeChannel:function(a){a&&(this.disable(),e=""+a),channel=GB.Pusher.subscribe(e),channel&&(channel.bind("new_data",n),t=!0)}}}(),GB.models.ServiceAccount=GB.models.Model.extend({urlRoot:function(){return API_URL+"groups/"+this.groupId+"/accounts/"},serviceImageURL:function(){return GB.config.SERVICE_IMAGE_URL+this.get("service").name+".png"},initialize:function(e){e&&(this.id=e.id,this.groupId=e.groupId)},toJSON:function(){var e=this.attributes,t={basic_auth:e.basic_auth,extra:e.extra,name:e.name,id:e.id};return e.service_id&&(t.service=e.service_id),t}}),function(e){GB||(GB={});var t=GB.Tracker={trackers:{},interval:15e3,init:function(e){this.user=e,_.each(this.trackers,function(t){"function"==typeof t.init&&t.init(e)}),this.initializeTracking()},initializeTracking:function(){this.accountName=GB.models.organization&&GB.models.organization.get("account"),this.sessionType=GB.models.config.get("read_only")?"sharing":"admin",this._trackingCookieName="gb_tracking_"+this.sessionType;var e=GB.cookie.get(this._trackingCookieName);e&&(this.sessionId=e),this.startSession()},startSession:function(){var t,n=this.user.get("tracking_id");return this.sessionId?(this.updateSession(),void 0):("sharing"===this.sessionType&&(n=GB.cookie.get("gb_mixpanel")||n),t={data:JSON.stringify({distinct_id:n,master_account_name:this.accountName,session_type:this.sessionType,cookie_enabled:GB.cookie.isEnabled()}),dataType:"json",contentType:"application/json",type:"POST",url:TRACKING_HOST+"/session",success:_.bind(function(e){this.sessionId=e.session_id,GB.cookie.set(this._trackingCookieName,this.sessionId),setTimeout(_.bind(this.updateSession,this),this.interval)},this)},e.ajax(t),void 0)},updateSession:function(){var t,n=TRACKING_HOST+"/sessions/"+this.sessionId;if(!this.sessionId)throw new Error("Call start session first!");t={type:"GET",url:n,dataType:"text",global:!1,error:_.bind(function(e,t,a){this.sessionId=null,this.startSession(),404!==e.status&&GeckoErrorLog.notify({message:e.status+" "+a,url:n,extraInfo:{responseText:e.responseText,accountURL:location.href},grouping:{type:"Track get session status",location:"tracking.js"}})},this),success:_.bind(function(){setTimeout(_.bind(this.updateSession,this),this.interval)},this)},e.ajax(t)},track:function(e,t){var n;t||(t={}),n=_.extend(t.model?t.model.trackingProperties():{},t.properties),this.user&&_.extend(n,this.user.trackingProperties()),_.each(this.trackers,function(a){a.track(e,n,t.callback)})}};t.trackers.mixpanel={init:function(e){this.user=e,null==GB.cookie.get("gb_mixpanel")&&(e&&null!=e.get("tracking_id")?GB.cookie.set("gb_mixpanel",e.get("tracking_id"),{domain:".geckoboard.com"}):GB.cookie.set("gb_mixpanel",GB.cookie.get("_geckoboard_session"),{domain:".geckoboard.com"})),this.register()},register:function(){this.user&&window.mixpanel&&window.mixpanel.register({"geckoboard user":"yes"})},track:function(e,t,n){window.mixpanel&&GB.cookie.get("gb_mixpanel")&&(window.mixpanel.identify(GB.cookie.get("gb_mixpanel")),this.user&&(window.mixpanel.name_tag(this.user.get("email")),window.mixpanel.people.set({$email:this.user.get("email"),$created:this.user.get("created_at")})),window.mixpanel.track(e,t,n))}}}(jQuery),GB.cookie=function(){var e={path:"/"},t=function(t){return _.extend({},e,t)},n=function(e,n,a){return $.cookie(e,n,t(a))},a=function(e){return $.cookie(e)},l=function(e,n){$.removeCookie(e,t(n))},i=function(){return n("test_cookie","cookie_value"),"cookie_value"==a("test_cookie")};return{set:n,get:a,remove:l,isEnabled:i}}(),function(){GB||(GB={}),GB.Optimizely={data:{},optimizely:window.optimizely,isLoaded:function(){return this.optimizely?!0:!1},pushEvent:function(e){return this.isLoaded()?(this.optimizely.push(["trackEvent",e]),void 0):!1},getVariation:function(e){return this.isLoaded()?this.optimizely.data.state.variationMap[e]:null},matchVariation:function(e,t){return this.getVariation(e)==t}}}(jQuery),GB.utils={emailRegex:/^[a-zA-Z0-9._\+\-]+@[a-zA-Z0-9_\-]+[\.][a-zA-Z0-9._\-]+$/,timeLabel:function(e){return 60>e?e+=" seconds":(e/=60,60>e?e+=" minute"+(1===e?"":"s"):(e/=60,e+=" hour"+(1===e?"":"s")))},pluralize:function(e,t){var n=e+" "+t;return 1!==e&&(n+="s"),n},newSizeToOldSize:function(e){switch(e){case"1x1":return"x";case"2x1":return"xx";case"2x2":return"xxx";case"full-width":return"xxxx";case"1x2":return"xxxxxx";case"3x2":return"xxxxxxx";case"3x3":return"xxxxxxxx";case"4x2":return"xxxxxxxxx";case"4x3":return"xxxxxxxxxx";case"4x4":return"xxxxxxxxxxx";default:throw{message:"Unknown size"}}},oldSizeToNewSize:function(e){switch(e){case"x":return"1x1";case"xx":return"2x1";case"xxx":return"2x2";case"xxxx":return"full-width";case"xxxxxx":return"1x2";case"xxxxxxx":return"3x2";case"xxxxxxxx":return"3x3";case"xxxxxxxxx":return"4x2";case"xxxxxxxxxx":return"4x3";case"xxxxxxxxxxx":return"4x4";default:throw{message:"Unknown size"}}},pxToInt:function(e){return e?parseInt(e,10):0},formatNumber:function(e,t,n,a,l){return t||(t=""),l=null==l?!0:l,a=+a||2,""===t?(e=this.getFormatNumber(e,n,a),l?this.getHtmlFormat(e):e):"%"===t?(e=this.getFormatNumber(e,n,a).split("."),2===e.length?e[0]+"<sup>."+e[1]+"%</sup>":e[0]+"<sup>%</sup>"):(l?(pos=(e+"").indexOf("."),-1!==pos&&1e3>e?(e+="",e=e.substr(0,pos)+"<sup>"+e.substr(pos)+"</sup>"):(e=this.getFormatNumber(e,n,a),e=this.getHtmlFormat(e)),e="<sup>"+t+"</sup>"+e):(e=this.getFormatNumber(e,n,a),e=t+e),e)},getFormatNumber:function(e,t,n){if(e+="",1e3>e)e=-1!==e.indexOf(".")?this.number_format(e,n,".",","):parseInt(e,10);else if(1e5>e)e=parseFloat(e),e=this.number_format(e,0,".",",");else if(1e6>e)e=parseFloat(e/1e3),e=this.number_format(e,1,".",","),e+="K";else if(1e7>e){switch(e=parseFloat(e/1e6),t){case"r&n":e=this.number_format(e,1,".",",");break;default:e=this.number_format(e,3,".",",")}e+="M"}else if(1e8>e){switch(e=parseFloat(e/1e6),t){case"r&n":e=this.number_format(e,1,".",",");break;default:e=this.number_format(e,2,".",",")}e+="M"}else if(1e9>e)e=parseFloat(e/1e6),e=this.number_format(e,1,".",","),e+="M";else if(1e10>e){switch(e=parseFloat(e/1e9),t){case"r&n":e=this.number_format(e,1,".",",");break;default:e=this.number_format(e,3,".",",")}e+="B"}else if(1e11>e){switch(e=parseFloat(e/1e9),t){case"r&n":e=this.number_format(e,1,".",",");break;default:e=this.number_format(e,2,".",",")}e+="B"}else e=parseFloat(e/1e9),e=this.number_format(e,1,".",","),e+="B";return(e+"").replace(/\.0+(K|M|B)*$/,"$1")},number_format:function(e,t,n,a){e=(e+"").replace(/[^0-9+-Ee.]/g,"");var l=isFinite(+e)?+e:0,i=isFinite(+t)?Math.abs(t):0,s="undefined"==typeof a?",":a,r="undefined"==typeof n?".":n,o="",c=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};return o=(i?c(l,i):""+Math.round(l)).split("."),o[0].length>3&&(o[0]=o[0].replace(/(\d{1,3})(?=(\d{3})+(?!\d))/g,"$1"+s)),o.join(r)},getHtmlFormat:function(e,t){return e+="",t||(t=[",","."]),_.isArray(t)||(t=[t]),_.each(t,function(t){var n="",a=e.indexOf(t);-1!==a&&(n=e.substr(0,a-1),n+='<span class="comma">',n+=e.substr(a-1,2),n+="</span>",n+=e.substr(a+1,e.length),e=n)}),e},getTimezones:function(e,t){var n=this;if("function"!=typeof e)throw new Error("No callback function supplied for getTimezones");return this.timezones?(e.call(t,this.timezones),void 0):($.getJSON("/scripts/v3/app/libs/country-timezones.json?v=1",function(a){n.timezones=a,e.call(t,a)}),void 0)},isValidEmail:function(e){return this.emailRegex.test(e)}};var Searchable={matches:function(e){return e=e.toLowerCase(),_.any(this.searchableAttributes,function(t){return this.has(t)&&-1!==String(this.get(t)).toLowerCase().indexOf(e)},this)}};GB.models.Category=Backbone.Model.extend({searchableAttributes:["title"]}),_.extend(GB.models.Category.prototype,Searchable),GB.models.Service=GB.models.Model.extend({urlRoot:API_URL+"services",getImageUrl:function(){return window.ASSET_HOST+"/services_thumbs/"+this.get("name")+".png"},usesOAuth:function(){var e=this.get("auth_type");return"oauth"===e||"oauth2"===e},getAuthUrl:function(e){var t=this.get("auth_type"),n={},a="";return e||(e={}),"basic"===t?"/auth/basic?s="+this.get("id")+"&amp;r="+location.pathname.replace(/^\//,""):(a=AUTH_API_URL+this.get("auth_type")+"/authorize/"+this.get("name")+"/",n.redirect_url=e.redirect_url?e.redirect_url:e.widget_type_id?GB.config.ROOT_URL+"dashboard/oauth_return?widget="+e.widget_type_id:GB.config.ROOT_URL,e.group_id&&(n.group_id=e.group_id),e.service_account_id&&(n.service_account_id=e.service_account_id),n.redirect_url=encodeURIComponent(n.redirect_url),e.extra_params&&_.each(e.extra_params,function(e,t){var a="extra["+t+"]";n[a]=e}),_.keys(n).length>0&&(a+="?",_.each(n,function(e,t){a+=t+"="+e+"&"}),a=a.slice(0,a.length-1)),a)},searchableAttributes:["title","name"],getConnectScreenFields:function(){var e=this.get("options");return e.connectScreen?e.connectScreen.fields:void 0},getWidgetTypes:function(e){return this.widgetTypes?(e.success(this.widgetTypes),void 0):(this.widgetTypes=new GB.collections.ServiceWidgetTypes({service_id:this.get("id")}),this.widgetTypes.fetch(e))},trackingProperties:function(){return{service_id:this.id,title:this.get("title")}}}),_.extend(GB.models.Service.prototype,Searchable),GB.models.extractUserErrorMessage=function(e){var t;if(e.responseText)try{t=JSON.parse(e.responseText).user_error}catch(n){}return t||""},GB.models.Config=Backbone.Model.extend({hasFeature:function(e){return"undefined"!=typeof this.getFeatures()[e]},getFeatures:function(){return this.get("features")||{}}}),GB.models.Group=GB.models.Model.extend({urlRoot:API_URL+"groups",toJSON:function(){var e={name:this.get("name")};return this.get("organization")&&(e.company=this.get("company"),e.custom_domain=this.get("custom_domain")),e},hasMaxDashboards:function(){var e=this.get("usages").dashboards,t=this.get("allowances").max_dashboards;return null===t?!1:e>=t},hasOneUserMax:function(){var e=this.get("allowances").max_users;return 1===e?!0:!1},trackingProperties:function(){var e={group_id:this.id},t=this.get("plan");return t&&(e.plan="object"==typeof t?t.get("code"):t,e.billing=this.get("billing")),e},incrementDashboardUsage:function(e){this._incrementUsage("dashboards",e)},decrementDashboardUsage:function(e){this._decrementUsage("dashboards",e)},incrementUserUsage:function(e){this._incrementUsage("users",e)},decrementUserUsage:function(e){this._decrementUsage("users",e)},bindToUsages:function(){GB.collections.dashboards.on("add",this.incrementDashboardUsage,this),GB.collections.dashboards.on("remove",this.decrementDashboardUsage,this)},bindToUsersUsage:function(){this.on("add-user",this.incrementUserUsage,this),this.on("remove-user",this.decrementUserUsage,this)},_incrementUsage:function(e,t){var n=this.get("usages");t=t||1,n[e]+=t,this.set({usages:n})},_decrementUsage:function(e,t){var n=this.get("usages");t=t||1,n[e]-=t,this.set({usages:n})}}),GB.models.Organization=GB.models.Group.extend({calculateNextInvoiceAmount:function(){var e=null;return e=this.get("annual_subscription")?this.currentPlan().get("annual_price"):this.currentPlan().get("monthly_price")},isOnAFreePlan:function(){return this.currentPlan().get("free")&&"trial"!=this.currentPlan().get("code")},isOnAFixedPlan:function(){return this.currentPlan().get("fixed")},isOnAnObsoletePlan:function(){return this.currentPlan().get("obsolete")},hasChosenPlan:function(){return!_.contains(["trial","free"],this.currentPlan().get("code"))},hasSubscriptionExpired:function(){var e=moment(this.get("subscription_expires_at"));return this.get("subscription_expires_at")&&moment()>e},isSubscribed:function(){return"y"===this.get("billing")},currentPlan:function(){return this.get("plan")}}),GB.models.User=GB.models.Model.extend({urlRoot:function(){var e=API_URL,t=this.get("group_id");return e+=t?"groups/"+t+"/users/"+this.id:"user"},getMaxDashboards:function(){return this.getDetails().dashboard||8},url:function(){return this.urlRoot()},getDetails:function(){return this.get("details")||{}},trackingProperties:function(){return{tracking_id:this.get("tracking_id")}},toJSON:function(){var e={first_name:this.get("first_name"),last_name:this.get("last_name"),email:this.get("email"),newsletter:this.get("newsletter")};return this.get("password")&&(e.password=this.get("password")),e},getNormalisedPlanCode:function(){var e=this.get("plan").replace(/-.*/,"");return _.contains(["s","m","l","xl"],e)||(e="s"),e},isAdmin:function(){return this.get("is_admin")}}),GB.models.Widget=GB.models.Model.extend({initialize:function(){this.on("destroy",function(){GB.Tracker.track("widget removed",{model:this}),this.cleanUp()},this),this.data=null,this.refreshTimeout=null,this.setPushStatus()},urlRoot:function(){return API_URL+"dashboards/"+GB.models.dashboard.id+"/widgets/"},setPushStatus:function(){var e=this.get("configuration")||{};GB.push.enabled()||"push"!==e.method||GB.push.enable()},isHighChart:function(){return"highchart"===this.getWidgetType().getTemplateType()},cleanUp:function(){this.stopRefresh(),this.off(),delete this.data},templateType:function(){var e=this.get("configuration")||{},t=this.getWidgetType();return(t?t.getTemplateType(e.type):"text").toLowerCase()},trackingProperties:function(){return{widget_id:this.id,widget_type_id:this.getWidgetType().id}},hasNoData:function(){return this.getWidgetType().hasNoData()},getWidgetType:function(){return GB.models.widgetTypes.get(this.get("widget_type_id"))},getService:function(){return GB.models.services.get(this.get("widget_type_id"))},getRefreshDelay:function(){var e=(this.get("configuration")||{}).reload||this.getWidgetType().getRefreshRate();return parseInt(e,10)||300},isCustomWidget:function(){return this.getWidgetType().isCustomWidget()},setupRefresh:function(e){if(!this.refreshTimeout){var t=e||this.getRefreshDelay();this.refreshTimeout=window.setTimeout(_.bind(function(){this.refreshTimeout=null,this.handleRefresh()},this),1e3*t)}},handleRefresh:function(){this.fetchDataFromServer({success:function(){this.setupRefresh()}})},stopRefresh:function(){this._xhr&&"function"==typeof this._xhr.abort&&(this._xhr.abort(),delete this._xhr),this.refreshTimeout=clearTimeout(this.refreshTimeout)},setBadDataRefresh:function(){this.stopRefresh(),this.setupRefresh(300)},fetchDataFromCache:function(e){var t,n,a=this.get("configuration")||{},l="map"===this.getWidgetType().getTemplateType(a.type),i=this.encryptionEnabled();if(l||i||!this._hasLocalStorage())return!1;if(!e&&(t=localStorage[GB.models.cacheKey("expiry-"+this.id)]||0,+new Date/1e3>=t))return this.deleteFromCache(),!1;if(n=localStorage[GB.models.cacheKey("widget-"+this.id)],!n)return this.deleteFromCache(),!1;if(this.isHighChart())try{this.setHighchartData(n)}catch(s){this.handleRefresh()}else this.data=JSON.parse(n);return this.data},storeToCache:function(e){var t=this.get("configuration")||{},n="map"===this.getWidgetType().getTemplateType(t.type);return n||!window.localStorage?!1:(localStorage[GB.models.cacheKey("expiry-"+this.id)]=Math.round(+new Date/1e3)+parseInt(this.getRefreshDelay(),10)||0,localStorage[GB.models.cacheKey("widget-"+this.id)]=_.isString(e)?e:JSON.stringify(e),void 0)},deleteFromCache:function(){localStorage.removeItem(GB.models.cacheKey("expiry-"+this.id)),localStorage.removeItem(GB.models.cacheKey("widget-"+this.id))},setHighchartData:function(e){var t=Function("var data = "+e+"; return data;");this.data=t()},fetchDataFromServer:function(e){if(this.hasNoData())return this.trigger("change",this),!0;if(this.isPHPWidget())return this.noLongerSupported();var t=this.isHighChart(),n=this.encryptionEnabled(),a={id:this.get("id")};this.trigger("fetch");var l=t||n;this._xhr=$.ajax({url:this._getDataUrl(),data:a,global:!1,dataType:l?"text":"json",success:_.bind(function(a){if(delete this._xhr,"object"==typeof a&&a.success===!1)return this.trigger("error",null,null,"Failed to load widget data"),void 0;if(n&&(this._rawData=a,a=this.decryptData(a),!t&&a&&(a=JSON.parse(a)),a||this.trigger("error",null,null,"Data couldn't be decrypted!")),t&&a)try{this.setHighchartData(a)}catch(l){return this.trigger("error",null,null,"Failed to load chart configuration"),void 0}else this.data=a;a.cached===!1?this.deleteFromCache():this.storeToCache(t||n?a:this.data),this.trigger("change",this),e&&"function"==typeof e.success&&e.success.call(this,this.data)},this),error:_.bind(function(t,n){var a=GB.models.extractUserErrorMessage(t),l=this.fetchDataFromCache(!0);GB.models.config&&GB.models.config.get("loop")||this.setBadDataRefresh(),l?this.trigger("badrefresh"):this.trigger("error",t,n,a||"Failed to load widget data"),e&&"function"==typeof e.error&&e.error.apply(this,Array.prototype.slice.call(arguments))},this)})},isPHPWidget:function(){return this.getWidgetType().get("php")},noLongerSupported:function(){return this.trigger("error",void 0,"",["This widget type is no longer supported due to service API changes. ","Remove this widget and replace it with an equivalent new"," version. ",'Please <a href="http://support.geckoboard.com/home">',"contact support</a> if you have any problems."].join(""))},fetchConfig:function(e){var t,n,a,l=this.get("data_id"),i=this,s={},r=0;return!e.forceCreate&&l?(n=l,s.id=this.get("id")):(a=this.getWidgetType(),n="widget_create/"+a.get("id")),t=this.connectedAccounts(),t.length&&_.each(t,function(e){s["service_accounts["+r+"]"]=e,r+=1}),e.config&&(s.config=e.config),$.ajax({url:DATA_API_URL+n+"/config",data:s,dataType:"json",type:"GET",success:function(t){"function"==typeof e.success&&e.success.call(i,t)},error:function(t){var n=GB.models.extractUserErrorMessage(t);return"function"==typeof e.error?e.error.call(i,n):void 0}})},fastFetch:function(){var e=this.fetchDataFromCache();return e?this.trigger("change",this):this.fetchDataFromServer(),e},fetch:function(e,t,n){this.set(e,{silent:!0}),this.fetchDataFromServer({success:t,error:n})},getTypeName:function(){var e=this.get("configuration")||{};return"map"===this.getWidgetType().getTemplateType(e.type)&&this.widgetHTMLloaded?"json":this.getWidgetType().get("response_type")||"html"},_getDataUrl:function(){var e,t;return e="",t=[],e="highchart"===this.getWidgetType().getTemplateType()?DATA_API_URL+this.get("data_id")+"/highchart.js":DATA_API_URL+this.get("data_id")+"/data",this.get("bustCache")&&(t.push("nocache=true"),this.set("bustCache",null,{silent:!0})),GB.models.config&&!GB.models.config.get("loop")&&GB.models.config.get("read_only")&&t.push("sharing_hash="+GB.models.dashboard.get("sharing_hash")),t.push("widget_type_id="+this.getWidgetType().id),t.length&&(e+="?"+t.join("&")),e},extractLayout:function(e){var t=e.position(),n=this.getLayout();this.set({layout:{width:e.width(),height:e.height(),left:this.gridSafePosition(t.left),top:this.gridSafePosition(t.top),size:n.size,order:parseInt(e.css("z-index"),10)||0}},{silent:!0})},toJSON:function(){var e={};return e.config=this.get("configuration")||{},_.isArray(e.config)&&(e.config={}),this.hasNoData()||(e.accounts=this.get("service_accounts")),_.extend(e,{widget_type:this.getWidgetType().get("id"),layout:this.getLayout()})},getLayout:function(){var e=this.get("layout")||{};return e.top=this.gridSafePosition(parseInt(e.top,10)||0),e.left=this.gridSafePosition(parseInt(e.left,10)||0),_.extend({size:"1x1"},e)},copyToDashboards:function(e,t){$.ajax({url:API_HOST+"/dashboards/"+GB.models.dashboard.id+"/widgets/"+this.id+"/copy",data:{dashboard:e},dataType:"json",success:t.success,error:t.error||function(){GB.ConfirmPopup.close(),PopupModel.showErrorPopup("error-popup","Failed to copy widget")}})},getServiceTitle:function(){return this.getWidgetType().get("service_title")||""},serviceAccountIds:function(){var e=[];return _.each(this.get("services"),function(t){t.account&&e.push(t.account.id)}),e},connectedAccounts:function(){var e=_.map(this.get("service_accounts")||this.serviceAccountIds(),function(e){return+e});return _.map(this.getWidgetType().getServicesRequiringAccounts(),function(t){var n;return t.accounts.each(function(t){return _.contains(e,+t.id)?(n=t.id,!1):void 0}),parseInt(n||t.accounts.first().id,10)})},gridSafePosition:function(e){var t=e%20,n=0;return t>10?n=20-t:0!==t&&(n=-t),e+n+"px"},encryptionEnabled:function(){var e=this.getWidgetType().get("encryption"),t=this.get("client_encryption_enabled"),n=GB.models.config.hasFeature("client_encryption");return e&&t&&n},decryptData:function(e){var t=GB.config.cryptoPassword;if(t){var n=this.decryptContentsWithPassword(e,t);return n?n:(this.trigger("error",null,null,"Data couldn't be decrypted. Check your password."),!1)}return this.trigger("error",null,null,"No encryption password set"),!1},decryptContentsWithPassword:function(e,t){var n,a,l=e.replace(/\s/g,"");try{n=CryptoJS.AES.decrypt(l,t),a=n.toString(CryptoJS.enc.Utf8)}catch(i){return!1
}return a?a:!1},_cryptTest:function(e){return this.decryptContentsWithPassword(this._rawData,e)},_hasLocalStorage:function(){return!!window.localStorage}}),GB.models.WidgetType=GB.models.Model.extend({urlRoot:API_URL+"widget_types",searchableAttributes:["description","name","title"],getImageUrl:function(){var e=this.get("widget");return"custom"==e&&(e=this.get("widget_uname")),window.ASSET_HOST+"/widget_thumbs_new/"+e+".png"},getTemplateType:function(e){var t=this.get("template_type")||"";return _.isObject(t)&&_.has(t,e)?t[e]:t},hasNoData:function(){return this.get("no_data")},useCustomWidgetScreen:function(){var e=["custom","highchart","svgmapping"];return _.contains(e,this.get("widget"))},isCustomWidget:function(){return this.useCustomWidgetScreen()},getRefreshRate:function(){var e=this.get("reload")||{};return e.m||300},getService:function(){var e=this.get("services");return e?GB.models.services.get(e[0]):void 0},getAllServices:function(){return _.map(this.get("services"),function(e){return GB.models.services.get(e)})},getServicesRequiringAccounts:function(){return _.filter(this.getAllServices(),function(e){return!!e.get("requires_account")})},hasServiceRequiringAccount:function(){var e=!1;return _.each(this.get("services"),function(t){var n=GB.models.services.get(t);return n.get("requires_account")?(e=!0,!1):void 0}),e},trackingProperties:function(){return{services:this.get("services").join(","),widgetTypeId:this.id,title:this.get("title")}}}),_.extend(GB.models.WidgetType.prototype,Searchable),GB.models.Dashboard=GB.models.Model.extend({columnWidth:240,urlRoot:function(){var e=API_URL;return+this.get("group_id")&&(e+="groups/"+this.get("group_id")+"/"),e+="dashboards"},initialize:function(){this.on("destroy",function(){GB.Tracker.track("Dashboard removed",{model:this})})},pixelWidth:function(){return this.get("columns")*this.columnWidth-10},isPublic:function(){var e=(this.get("public")||"").toString();return!!e.match(/^y|true/)},isShared:function(){var e=this.get("sharing");return e&&"n"!==e},sharingURL:function(){return GB.config.ROOT_URL+"dashboards/"+this.get("sharing_hash")},trackingProperties:function(){return{dashboard_id:this.id,dashboard_title:this.get("title")}},toJSON:function(){var e={title:this.get("title"),timezone:this.get("timezone"),columns:this.get("columns"),large_screen:this.get("large_screen"),"public":this.isPublic(),sharing:this.isShared(),css:this.get("css"),country:this.get("country")};return null!=this.get("devices")&&(e.devices=this.get("devices")),e},fetchWidgetsAndTypes:function(e){$.ajax({type:"GET",url:API_URL+"dashboards/"+this.get("id")+"/widgets_and_types",dataType:"json",success:function(t){var n=t.data.widgets,a=t.data.widget_types;GB.models.widgetTypes.add(a,{merge:!0}),GB.models.widgets.reset(n),e.success()},error:function(t){e.error(t)}})},copy:function(e,t){var n=t.success,a=this.id;return $.ajax(_.extend(t,{url:API_URL+"groups/"+this.get("group_id")+"/dashboards/"+this.id+"/copy",data:JSON.stringify(e),type:"post",dataType:"json",headers:{"Content-Type":"application/json"},success:function(e){var t=new GB.models.Dashboard(e);GB.collections.dashboards.add(t),_.isFunction(n)&&n.call(void 0,t),GB.Tracker.track("Dashboard Copied",{original_dashboard_id:a,new_dashboard_id:t.id})}}))}}),GB.models.DashboardTemplate=GB.models.Model.extend({loadConfig:function(e){var t={},n=0,a=this.get("widget_type").id;return _.each(e.accountIds,function(e){t["service_accounts["+n+"]"]=e,n+=1}),e.config&&(t.config=e.config),$.ajax(_.extend({url:DATA_API_URL+"widget_create/"+a+"/config",data:t,dataType:"json"},e))},createDashboard:function(e,t){return $.ajax(_.extend(t,{url:API_URL+"groups/"+e.group_id+"/dashboards/templates",type:"post",dataType:"json",headers:{"Content-Type":"application/json"},data:JSON.stringify(_.extend(e,{template_id:this.id}))}))},filterConfigFields:function(e){var t=this.get("widget_type").visible_keys;return _.each(e,function(e){_.contains(t,e.name)||(e.fieldClass="hidden")}),e},trackingProperties:function(){return{id:this.id,name:this.get("name")}}}),GB.collections.Collection=Backbone.Collection.extend({model:GB.models.Model,initialize:function(){$.ajaxPrefilter(function(e){e.xhrFields={withCredentials:!0}})},parse:function(e){return _.has(e,"data")?e.data:e},forTemplate:function(e){return this.map(function(t){return _.extend({},e,t.attributeJSON())})}}),GB.collections.Categories=Backbone.Collection.extend({model:GB.models.Category,comparator:function(e){return e.get("title")}}),GB.collections.Services=GB.collections.Collection.extend({model:GB.models.Service,url:API_URL+"services",comparator:function(e){return e.get("title")}}),GB.collections.ServiceAccounts=GB.collections.Collection.extend({model:GB.models.ServiceAccount,url:function(){return API_URL+"groups/"+this.groupId+"/accounts"},initialize:function(e,t){t&&(this.groupId=t.groupId)},forTemplate:function(e){return this.map(function(t){return _.extend({imageURL:t.serviceImageURL()},t.attributeJSON(),e)})}}),GB.collections.WidgetTypes=GB.collections.Collection.extend({model:GB.models.WidgetType,url:API_URL+"widget_types",comparator:function(e,t){return t.get("rank")-e.get("rank")||e.get("title").localeCompare(t.get("title"))}}),GB.collections.TopWidgetTypes=GB.collections.WidgetTypes.extend({comparator:function(e,t){return e.get("rank")-t.get("rank")||e.get("title").localeCompare(t.get("title"))}}),GB.collections.ServiceWidgetTypes=GB.collections.WidgetTypes.extend({initialize:function(e){this.service_id=e.service_id},url:function(){return API_URL+"services/"+this.service_id+"/widget_types"}}),GB.collections.Widgets=GB.collections.Collection.extend({model:GB.models.Widget,url:function(){var e=API_URL+"dashboards/"+GB.models.dashboard.id+"/widgets/";return GB.models.config.get("read_only")||(e+="?include_accounts=1"),e},refetchEncrypted:function(){var e=this.filter(function(e){return e.encryptionEnabled()});_.each(e,function(e){e.fetch()})}}),GB.collections.Plans=GB.collections.Collection.extend({model:GB.models.Plan,url:function(){return API_URL+"organizations/"+GB.models.organization.id+"/plans"},swapPlan:function(e,t){this.models[t]=e}}),GB.collections.Invoices=GB.collections.Collection.extend({model:GB.models.Invoice,url:function(){return API_URL+"organizations/"+GB.models.organization.id+"/invoices"}}),GB.collections.Permissions=GB.collections.Collection.extend({model:GB.models.Permission,comparator:function(e,t){if(e.get("role")<t.get("role"))return-1;if(e.get("role")>t.get("role"))return 1;if(e.get("role")===t.get("role")){if(e.get("name")<t.get("name"))return-1;if(e.get("name")>t.get("name"))return 1}return 0}}),GB.collections.Dashboards=GB.collections.Collection.extend({model:GB.models.Dashboard,url:function(){var e=API_URL;return e+=this.groupId?"groups/"+this.groupId+"/dashboards":"dashboards"},initialize:function(e,t){t||_.isArray(e)||(t=e),this.on("add",function(e){GB.Tracker.track("dashboard added",{model:e})}),t&&(this.groupId=t.groupId)}}),GB.collections.DashboardPermissions=GB.collections.Permissions.extend({initialize:function(e){this.dashboard=e.entity},url:function(){return API_URL+"dashboards/"+this.dashboard.id+"/permissions"}}),GB.collections.DashboardTemplates=GB.collections.Collection.extend({model:GB.models.DashboardTemplate,url:API_URL+"dashboards/templates",forTemplate:function(e){return this.map(function(t){var n=t.attributeJSON();return t.id===e&&(n.selected=!0),n.imageURL=GB.config.SERVICE_IMAGE_URL+t.get("template_image")+".png",n})}}),GB.views.DynamicView=Backbone.View.extend({_loadedDependencies:{js:{},css:{}},loadingOverlay:{colorClass:"light",css:{opacity:.8}},loading:function(e){var t,n=this.$el;return this.$overlay?void 0:(e=_.extend({},this.loadingOverlay,e),e.appendTo&&(n=this.$(e.appendTo)),t=this.$("> .loading-overlay"),this.$loadingOverlay=0===t.length?$(GB.templates.loadingOverlay(e)):t,"object"==typeof this.loadingOverlay.css&&this.$loadingOverlay.css(this.loadingOverlay.css),n.append(this.$loadingOverlay),this)},isLoading:function(){return"undefined"!=typeof this.$loadingOverlay||0!==this.$(".loading-overlay").length},loaded:function(e){var t,n=this.$loadingOverlay||this.$("> .loading-overlay"),a=this;return n&&(t=function(){n.remove(),delete a.$loadingOverlay},e?n.fadeOut(this.loadingOverlay.fadeSpeed||300,t):t()),this},disable:function(){return this.$disabledOverlay=$('<div class="disabled-overlay '+this.loadingOverlay.colorClass+'" />'),this.$el.addClass("inactive").append(this.$disabledOverlay),this.trigger("disable")},enable:function(){return this.$el.removeClass("inactive"),this.$(".disabled-overlay").remove(),this.trigger("enable")},isDisabled:function(){return this.$el.hasClass("inactive")},showErrorMessage:function(e){var t,n=this._getMessageElement("error");return this.hideMessages(),"object"==typeof e?(t=[],_.each(e,function(e){t.push(e)}),t.join()):t=e,n.html(e).show(),this},showSuccessMessage:function(e){var t=this._getMessageElement("success");this.hideMessages(),t.html(e).show()},_getMessageElement:function(e){var t=this.$("."+e);return t.length||(t=$('<div class="'+e+'" />'),this.$el.prepend(t)),t},hideMessages:function(){this.hideErrorMessage().hideSuccessMessage()},hideErrorMessage:function(){return this.$(".error").hide(),this},hideSuccessMessage:function(){return this.$(".success").hide(),this},ajax:function(e){var t=this;return $.ajax(_.extend({dataType:"json",contentType:"application/json",error:function(e){var n;try{n=JSON.parse(e.responseText).message}catch(a){}n&&t.showErrorMessage(n)}},e))},injectDependencies:function(e,t){t||(t={});var n=t.success,a=this;e.js&&(_.isArray(e.js)||(e.js=[e.js]),t.success=function(){var l=e.js.pop();return l?a._loadScriptDependency(l,t):(_.isFunction(n)&&n.call(a),void 0)},t.success())},_loadScriptDependency:function(e,t){var n=t.success;return this._loadedDependencies.js[e]?(t.success(),void 0):this.ajax(_.extend(t,{url:ASSET_JS_HOST+e,dataType:"script",contentType:"",success:_.bind(function(){this._loadedDependencies.js[e]=+new Date,n.call(void 0)},this)}))},remove:function(){_.isFunction(this._beforeRemove)&&this._beforeRemove(),Backbone.View.prototype.remove.call(this)}}),GB.views.Notification=Backbone.View.extend({className:"notification-bar",events:{"click .notification":"close"},initialize:function(e){this.settings=_.extend({type:"warning"},e),this.template=e.template||GB.templates.notificationBar},render:function(){var e,t=this.settings;return t.link&&"function"==typeof t.link.href&&(e=t.link.href,t.link.href="#"),this.$el.html(this.template(t)).appendTo("body"),this.$el.css("left",$(window).width()/2-this.$el.width()/2),e&&this.$(".call-to-action").on("click",{notification:this},e),this},close:function(){"function"==typeof this.settings.onclose&&this.settings.onclose.call(this),this.$(".call-to-action").off("click"),this.remove()}}),GB.views.Widget=Backbone.View.extend({tagName:"article",events:{"click .edit":"edit","click .delete":"close","click .copy":"copy","click .led, .refresh-widget":"refresh","click .custom-error-message":"showCustomErrorMessage","mouseenter .large-screen":"toggleActionLinks","mouseleave .large-screen":"toggleActionLinks","click .ask-password":"askForPassword"},className:"widget",encryptedWidgetMessage:"Data couldn't be decrypted.<br/><a class='ask-password' href='#'>Click here to enter password.</a>",initialize:function(e){var t=this.model.getLayout();this.service=e.model.service,this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this),this.model.on("error",this.loadErr,this),this.model.on("fetch",this.indicateFetching,this),this.model.on("badrefresh",this.setBadRefreshState,this),this.renderLoadingState(),this.$el.addClass(this.model.getServiceTitle().toLowerCase().replace(/\W+/g,"-")).attr("id","widget-"+this.model.id).css({top:t.top,left:t.left,width:"full-width"===t.size?"100%":"auto"})},render:function(){this.$el.mouseup();var e=_.bind(function(){this.beforeRender();var e=this.renderWidget();e&&this.afterRender(e)},this);return this.$el.is(".loaded")?this.$(".widget-inner").fadeOut(300,e):e(),this.$el},renderWidget:function(){var e=(this.model.get("configuration")||{}).title||"",t={id:this.model.get("id"),title:e,isLarge:GB.views.dashboard.isLargeScreen(),isPublic:this.shouldHideEditControls(),isReverse:this.model.data&&"reverse"===this.model.data.type,footerName:this.model.getServiceTitle()||"Custom Widget",notForDeveloperPreview:null==GB.views.previewWidget,hasTitle:!!e.replace(/^\s|\s$/g,""),bodyClass:this.widgetClassName(),sizeClass:this.sizeClass(),canReload:!0};if(this.model.encryptionEnabled()&&!GB.config.cryptoPassword)return this.loadErr(null,null,this.encryptedWidgetMessage),this.askForPassword(),!1;try{t=this.templateContext(t,this.model),this.stopLED(),this.$el.css("width","full-width"===this.model.getLayout().size?"100%":"auto").addClass("loaded").html(GB.templates[this.templateName()](t))}catch(n){return this.$el.removeClass("loaded"),this.loadErr(null,null,"Failed to render widget"),!1}return t},renderLoadingState:function(){this.$el.html(GB.templates.widgetMessage({title:"Widget loading",hasTitle:!0,isFullWidth:"full-width"===this.model.getLayout().size,message:"Hold tight!",isPublic:!0,footerName:"loading",sizeClass:this.sizeClass(),ledClass:"loading",canReload:!0})),this.indicateFetching()},beforeRender:function(){},afterRender:function(){},beforeRemove:function(){},sizeClass:function(){return" widget-size-"+this.model.getLayout().size},templateContext:function(e){return e},remove:function(){return this.model.off(null,null,this),this.beforeRemove(),this.stopLED(),Backbone.View.prototype.remove.call(this),this},edit:function(e){GB.openAddWidgetScreen({widget:this.model}),e.preventDefault()},close:function(e){var t=this,n=new GB.views.Prompt;n.render({title:"You are about to delete a widget",message:"This action cannot be undone, you will be able to re-add the widget but will have to configure it again.",confirmText:"Remove widget",callbacks:{confirm:function(){t.remove(),t.model.destroy()}}}).open(),e.preventDefault()},copy:function(e){var t=new GB.views.CopyWidget({model:this.model});t.render().open(),e.preventDefault()},templateName:function(){return"widget_"+this.model.templateType()},loadErr:function(e,t,n){var a,l=this.model;l.get("id"),this.stopLED(),a={title:"",widgetType:{},ledClass:"error",hasTitle:!0,isPublic:this.shouldHideEditControls(),isFullWidth:"full-width"===l.getLayout().size,isLarge:GB.views.dashboard.isLargeScreen(),notForDeveloperPreview:null==GB.views.previewWidget,sizeClass:"widget-size-"+l.getLayout().size,canReload:!0},"timeout"===t?(a.widgetType.title="Connection timeout",a.message=["We're sorry, the connection to ",l.getWidgetType().get("title")," has timed out. We'll try again in 5 minutes or you can ",'<a class="refresh-widget" href="#">try again now</a>.</div>'].join(""),setTimeout(_.bind(l.handleRefresh,l),3e5)):this.model.isCustomWidget()&&!this.model.encryptionEnabled()?(a.title="Widget data invalid",a.customWidgetError=!0,a.errorMessage=n):(a.title="Internal widget error",a.message=n||""),this.$el.html(GB.templates.widgetMessage(a)),this.$(".widget-inner").show()},showCustomErrorMessage:function(e){var t=$(e.currentTarget).data("error-message"),n=new GB.views.CustomWidgetErrorModal({errorMessage:t});n.render().open()},setBadRefreshState:function(){this.$(".led").stop().removeClass("success loading").addClass("error")},indicateFetching:function(){var e=("blink-"+this.model.id,this.$(".led"));this.stopLED(),e.removeClass("success error").addClass("loading"),this.pulseLED(e)},pulseLED:function(e){var t=this;e.animate({opacity:0},500,function(){e.animate({opacity:1},500,function(){t.$el.hasClass("loaded")||t.pulseLED(e)})})},stopLED:function(e){e||(e=this.$(".led")),e.stop()},refresh:function(e){e&&$(e.currentTarget).hasClass("error")&&this.model.handleRefresh(),e.preventDefault()},widgetClassName:function(){return this.model.templateType()+"-widget"},toggleActionLinks:function(e){"mouseenter"===e.type?this.$("footer, aside").show():this.$("footer, aside").hide()},shouldHideEditControls:function(){return GB.models.config&&GB.models.config.get("read_only")||!GB.models.dashboard.get("can_edit")},askForPassword:function(e){e&&delete GB.config.cryptoPasswordDeclined,GB.config.cryptoPasswordDeclined||GB.views.dashboard.askForPassword()}}),GB.views.Dashboard=GB.views.DynamicView.extend({draggableLayout:{wrapper:0,widget:0,delta:40,step:250},loadingOverlay:{colorClass:"dashboard",css:{opacity:1}},widgets:[],initialize:function(){GB.models.widgets.on("reset",this.refreshWidgets,this),this.model.on("destroy",this.reload,this),this.model.on("change",this.resizeLayout,this)},render:function(){return GB.views.header&&this.$el.css("margin-top",GB.views.header.$el.outerHeight()+30),this.$el.disableSelection().empty(),this.initLayout(),this.hasPushWidgets=!1,this.initWidgets(),this.loaded(),this},reload:function(){var e=GB.collections.dashboards.first();return e?(this.switchDashboard({dashboard:e}),void 0):($.removeCookie("gb_active_dashboard"),$.removeCookie("gb_active_dashboard",{path:"/edit"}),document.location.href=document.location.protocol+"//"+document.location.host+"/",void 0)},initLayout:function(){var e=this.model.pixelWidth();e>=$(document).width()?$("body").width(e+20):$("body").width("auto"),$(".dashboard-sized-el").css("max-width",e+"px"),this.$el.width(e)},resizeLayout:function(){this.initLayout(),this.setCustomCSS(),this.killWidgetHTMLFromCache=this.model.hasChanged("large_screen")},initWidgets:function(){var e=this,t=this.options.readOnly||!1;this.widgets=[],GB.models.widgets.each(function(n){t&&(n.readOnly=!0),e.addWidget(n,!0)}),!this.model.get("can_edit")||null!=GB.models.config&&GB.models.config.get("read_only")||this.initDragDrop(),this.resetDashHeight()},refreshWidgets:function(){_.each(this.widgets,function(e){var t=e.model;t.cleanUp(),e.remove(),t.widgetHTMLloaded&&(t.widgetHTMLloaded=!1)},this),delete this.killWidgetHTMLFromCache,this.initWidgets()},addWidget:function(e,t,n){var a=this.viewClass(e),l=new GB.views[a]({model:e});return this.$el.append(l.el),t||(this.positionWidget(l),this.initDragDrop(l)),n||e.fastFetch(),e.setupRefresh(),this.widgets.push(l),l},positionWidget:function(e){var t=this.findWidgetPosition(e);e.$el.css(t)},initDragDrop:function(e){var t=this.widgets;null!=e&&(t=[e]),_.each(t,function(e){e.$el.draggable({stack:"article.widget",grid:[20,20],cursor:"move",scroll:!0,start:_.bind(this.handleDragStart,this,e),drag:_.bind(this.handleDrag,this,e),stop:_.bind(this.handleDragStop,this,e)})},this)},handleDragStart:function(e,t,n){var a=n.helper,l=a.data("dragtimer");l&&clearTimeout(l),this.draggableLayout.wrapper=this.$el.height(),this.draggableLayout.widget=a.height()},handleDrag:function(e,t,n){var a=this.draggableLayout.widget+this.draggableLayout.delta+n.position.top;a>=this.draggableLayout.wrapper&&(this.draggableLayout.wrapper+=this.draggableLayout.step,this.$el.height(this.draggableLayout.wrapper)),n.position=this.getConstrainedWidgetPosition(n)},getConstrainedWidgetPosition:function(e){var t=_.clone(e.position),n=this.$el.width(),a=e.helper.outerWidth(),l=t.left+a;return 0>t.left?t.left=0:l>n&&(t.left=n-a),0>t.top&&(t.top=0),t},handleDragStop:function(e,t,n){var a=n.helper;a.data("dragtimer",setTimeout(function(){e.model.extractLayout(a),e.model.save(null,{silent:!0})},500))},findWidgetPosition:function(e){var t,n=this.$(".widget"),a=this.model.get("columns"),l=[],i=[],s=[],r={w:e.$el.width()+10,h:e.$el.height()};return n=n.filter(function(t){return n.get(t)!==e.el}),n.each(function(){var e=$(this),t=e.position().top,n=t+e.height()+10;-1===l.indexOf(t)&&l.push(t),-1===l.indexOf(n)&&l.push(n)}),l.sort(function(e,t){return e-t}),_.each(l,function(e,t){for(var n=[],r=0;a>r;++r)n[r]=0;t>0&&s.push(l[t]-l[t-1]),i.push(n)},this),s[s.length-1]+=1e3,s.push(1e3),n.each(function(){var e,t,n,a=$(this),r=a.position(),o=l.indexOf(r.top),c=r.left/240,h=(a.width()+10)/240,d=a.height()+10,p=0;if(d>s[o])for(e=0,n=o;s.length>o&&(e+=s[n],p+=1,!(e>=d));n++);else p=1;for(t=0;h>t;t++)for(n=0;p>n;n++)i[o+n][c+t]=1}),$.each(l,function(e){for(var n,o,c,h,d,p=0,u=0,f=0;a>p;p++)if(0===i[e][p]){if(n=r.w/240,r.h<=s[e])f=1;else for(o=0,c=e;s.length>e&&(o+=s[c],f+=1,!(o>r.h));c++);for(h=0;f>h;h++)for(d=0;n>d;d++)void 0!==i[e+h]&&(u+=i[e+h][p+d]);if(0===u)return t={left:parseInt(240*p,10),top:parseInt(l[e],10)},!1}}),t||{top:0,left:0}},setCustomCSS:function(){var e,t=$("#dash-custom-css"),n=this.model.get("css");t.length?n?(e=t.attr("href"),e.replace(/^.+\/([^\/]+)$/,"$1")!==n&&t.attr("href",e.replace(/^(.+\/)[^\/]+$/,"$1")+n)):t.remove():n&&(t=$('<link id="dash-custom-css" rel="stylesheet">'),t.attr("href","https://s3.amazonaws.com/gecko.css/"+n).appendTo("head:first"))},resetDashHeight:function(){var e=$("#main-header"),t=30;e.length&&(t+=e.height()+30),this.$el.height(0).height($(document).height()-t)},startPublicLoop:function(e){this.loopTime=1e3*(e||30),this.showNextDashboard()},showNextDashboard:function(){var e,t;e=GB.collections.dashboards.indexOf(this.model),t=GB.collections.dashboards.models[e+1]||GB.collections.dashboards.first(),this.nextDashboardTimer=setTimeout(_.bind(function(){this.switchDashboard({dashboard:t,success:_.bind(this.showNextDashboard,this)})},this),this.loopTime)},switchDashboard:function(e){var t=this,n=e.dashboard;if(e.isNew&&GB.collections.dashboards.add(n),!GB.models.config.get("loop_mode")){if(GB.cookie.set("gb_active_dashboard",n.id,{expires:30}),!history||!_.isFunction(history.pushState))return document.location.href=document.location.protocol+"//"+document.location.host+"/edit/dashboards/"+n.id,void 0;GB.dashboardRouter.navigate("/edit/dashboards/"+n.id)}this._registerDashboard(n),GB.models.config.get("read_only")||this.loading({message:"loading your dashboard"}),GB.push.disable(),n.fetchWidgetsAndTypes({success:function(){t.resizeLayout(),GB.views.header&&GB.views.header.render({dashboard:n}),t.setDocumentTitle(n.get("title")),_.isFunction(e.success)&&e.success.call(void 0,n),t.loaded(!0)},error:function(){t._switchDashboardError&&t._switchDashboardError.remove(),t._switchDashboardError=new GB.views.Notification({message:"There was a problem connecting to the server",type:"error",onclose:function(){delete GB.requestFailedError},link:{text:"Reload the page",href:"/"}}).render(),t.loaded()}})},setDocumentTitle:function(e){e||(e=""),document.title=e+document.title.replace(/[^|]*(\|.*$)?/," $1")},animateTop:function(e,t){var n=parseInt(this.$el.css("margin-top"),10);this.$el.animate({marginTop:n+e+"px"},t)},replaceWidgetView:function(e){var t,n=-1;t=_.find(this.widgets,function(t){return n+=1,t.el.id==="widget-"+e.id}),t&&(t.remove(),this.widgets.splice(n,1),this.addWidget(e,!1,!0))},viewClass:function(e){return e.templateType()+"Widget"},isLargeScreen:function(){return this.model.get("large_screen")},_registerDashboard:function(e){this.model.off("destroy",this.reload,this),this.model.off("change",this.resizeLayout,this),GB.models.dashboard=this.model=e,GB.models.config.set("dashboardId",e.id),e.on("destroy",this.reload,this),e.on("change",this.resizeLayout,this)},askForPassword:function(){if(!GB.config.cryptoPassword&&!this.cryptoPasswordModal){var e=this;this.cryptoPasswordModal=new GB.views.CryptoPasswordModal,this.listenTo(this.cryptoPasswordModal,"confirmed",function(t){GB.config.cryptoPassword=t,e._removePasswordModal(),GB.models.widgets.refetchEncrypted()}),this.listenTo(this.cryptoPasswordModal,"cancelled",function(){e._removePasswordModal()}),this.cryptoPasswordModal.render().open()}},_removePasswordModal:function(){this.cryptoPasswordModal.remove(),delete this.cryptoPasswordModal}}),GB.views.numberWidget=GB.views.Widget.extend({showSparkline:!1,templateContext:function(e){var t,n=this.model,a="text"===n.data.item[0].type,l="time_duration"===n.data.item[0].type,i=e.stats={},s=a?s:parseFloat(n.data.item[0].value)||0;return e.isLargeTemplate="2x2"===n.get("layout").size,e.valueSign=n.data.item[0].text||"",e.cssClasses={value:e.isLargeTemplate?"x108":l?"x52":"x60"},i.num=l?this.formatDuration(s):a?_.escape(n.data.item[0].value):GB.utils.formatNumber(s,n.data.item[0].prefix),_.isArray(n.data.item[1])?(this.showSparkline=!0,e.chart=!0,e.hasSecondary=!0,e.sparkEndValue=GB.utils.formatNumber(_.last(n.data.item[1]),n.data.item[1].prefix)):n.data.item.length>1&&null!=n.data.item[1].value&&(t=parseFloat(n.data.item[1].value)||0,e.hasSecondary=!0,e.dataTypeIsStandard=!e.isReverse,e.cssClasses.secondary=e.isLargeTemplate?"x60":e.isLarge?"x48":"x30",e.statSign=n.data.item[1].text||"",n.data.absolute?(t=s-t,i.secondary=GB.utils.formatNumber(Math.abs(t))):0===s&&0===t?t=0:(t=0!==t?100*s/t-100:100,0>s&&0>t?t=-t:s>0&&t>0&&(t=Math.abs(t)),i.secondary=GB.utils.formatNumber(Math.abs(t),"%")),e.statIsZero=0===t,e.statGreaterThanZero=!e.statNullOrZero&&t>0),e.showItemText=e.isLargeTemplate||!e.hasSecondary&&e.valueSign,e},beforeRender:function(){var e=this.$(".sparkline").data("chart");e&&e.destroy()},beforeRemove:function(){this.showSparkline&&this.beforeRender()},normalizeSparkline:function(e){return normalized=_.map(e,function(e){return parseFloat(e)})},afterRender:function(e){var t,n,a,l,i,s;if(this.showSparkline&&(t=this.$(".sparkline"),t.length)){switch(s=this.normalizeSparkline(this.model.data.item[1]),n=e.sparkEndValue.replace(/<[^>]+>/g,"").length,this.model.getLayout().size){case"1x1":l=194-4*n,i=e.isLarge?104:78;break;case"2x2":l=440-6*n,i=e.isLarge?250:222}a=new Highcharts.Chart({chart:{renderTo:t.get(0),type:"line",backgroundColor:null,marginTop:5,marginRight:10,marginBottom:20,spacingTop:0,spacingBottom:0,style:{left:"-9px"},height:i,width:l},credits:{enabled:!1},exporting:{enabled:!1},title:null,tooltip:{enabled:!1},xAxis:{title:null,gridLineColor:null,lineColor:null,labels:{enabled:!1},tickColor:null},yAxis:{title:null,gridLineColor:null,lineColor:null,labels:{enabled:!1},max:Math.ceil(_.max(s)),startOnTick:!1},legend:{enabled:!1,width:l},plotOptions:{enableMouseTracking:!1,line:{states:{hover:{enabled:!1}}}},series:[{color:"#F90",data:s,marker:{enabled:!1,states:{hover:{enabled:!1}}}}]}),t.data("chart",a)}},formatDuration:function(e,t){var n=moment.duration(e),a=["years","months","days","hours","minutes","seconds"],l=[];return t||(t={years:"y",months:"mo",days:"d",hours:"h",minutes:"m",seconds:"s"}),_.each(a,function(e){var a=n[e]();a&&2>l.length&&l.push(a+'<span class="unit">'+t[e]+"</span>")}),l.join(" ")}}),GB.views.textWidget=GB.views.Widget.extend({CONFIG_DATA_COUNT:4,ribbonClasses:["none","warning","info"],templateContext:function(e){var t=this.getDataItems();return this.moreThanOneItem=t.length>1,_.extend(e,{items:t,moreThanOneItem:this.moreThanOneItem,totalItems:t.length}),e},getDataItems:function(){var e,t,n,a=0,l="";if(this.model.data)return this.model.data.item;for(e=this.model.get("configuration"),t=[],"undefined"==typeof e.text&&(l="[]");a!=e["text"+l].length;)n=e["text"+l][a],n&&t.push({text:n,type:e["type"+l][a]}),a+=1;return t},afterRender:function(){var e;"full-width"!==this.model.getLayout().size&&(e={pager:this.$(".slide-pagination nav"),pageAnchorBuilder:this._buildAnchorLinks,after:_.bind(this.updateSlideIndex,this)}),this.$(".slides").cycle(_.extend({speed:600,fx:"fade",timeout:1e4,cleartypeNoBg:!0},e)),this.moreThanOneItem||this.setRibbon(this.$("div.slide"))},_buildAnchorLinks:function(){return'<a href="#"></a>'},beforeRender:function(){this.$(".slides").cycle("destroy")},beforeRemove:function(){this.beforeRender()},updateSlideIndex:function(e,t){var n=1;this.$(".slide").each(function(e,a){return a===t?(n=e+1,void 0):void 0}),this.setRibbon(t),this.$(".slide-tally").html(n)},setRibbon:function(e){var t=$(e).data("ribbontype")||0;this.$(".slide-ribbon").removeClass(this.ribbonClasses.join(" ")).addClass(this.ribbonClasses[t])},toggleActionLinks:function(e){this.$(".widget-inner > footer, .widget-inner > aside").length&&("mouseenter"===e.type?(this.$(".slide-pagination").css("bottom","36px"),this.$("footer, aside").show()):(this.$(".slide-pagination").css("bottom","0px"),this.$("footer, aside").hide()))},templateName:function(){return"full-width"===this.model.getLayout().size?"widget_text_full_width":"widget_text"}}),GB.views.ragWidget=GB.views.Widget.extend({templateContext:function(e){var t,n=1,a=this,l="2x2"===this.model.getLayout().size;return t=l?"x60":e.isLarge?"x48":"x30",e.results=[],_.each(this.model.data.item,function(l){if(l.value||0===l.value){var i=isNaN(l.value)?l.value:GB.utils.formatNumber(l.value,l.prefix||"","r&n",1);e.results[e.isReverse?"unshift":"push"]({value:i,text:l.text||"",size:t,displayClass:a.ragClass(n,e.isReverse)})}n+=1}),e},ragClass:function(e,t){return 1===e?t?"positive":"negative":2===e?"level":t?"negative":"positive"}}),GB.views.ragcolumnWidget=GB.views.ragWidget.extend({templateContext:function(e){var t,n=this.model,a=this,l=n.data.item,i=1,s="2x2"===n.getLayout().size,r=_.reduce(l,function(e,t){return e+=parseInt(t.value,10)||0},0);return s?(t="x60",e.columnHeight=290,e.columnWidth=160):(t=e.isLarge?"x36":"x30",e.columnHeight=e.isLarge?125:120,e.columnWidth=60),e.results=[],_.each(l,function(n){var s;(n.value||0===n.value)&&(s=GB.utils.formatNumber(n.value,n.prefix||"","r&n",1),e.results[e.isReverse?"unshift":"push"]({height:r>0?Math.round(100*(n.value/r)):100/l.length,color:"color-"+i,value:s,text:n.text||"",size:t,displayClass:a.ragClass(i,e.isReverse)})),i+=1}),e}}),GB.views.highchartWidget=GB.views.Widget.extend({templateContext:function(e){return e.footerName='<a href="http://www.highcharts.com/">Highcharts</a>',e},beforeRender:function(){this.chart&&"function"==typeof this.chart.destroy&&(this.chart.destroy(),delete this.chart)},afterRender:function(ctx){var chartData=this.model.data,errorMessage="Failed to render chart";if(this.model.getWidgetType().isCustomWidget()&&(errorMessage="Chart data couldn't be parsed"),chartData.highchart&&(chartData=chartData.highchart),_.isString(chartData))try{eval("chartData="+chartData)}catch(e){chartData=!1}return chartData&&chartData.chart?(chartData.chart.renderTo=this.$(".widget-canvas").get(0),chartData.chart.height=this.getChartHeight(ctx.isLarge),this.chart=new Highcharts.Chart(chartData)):(this.loadErr(null,null,errorMessage),void 0)},beforeRemove:function(){this.beforeRender()},getChartHeight:function(e){var t=this.$el.height(),n=this.$(".widget-body");return t-=this.$("header:first").outerHeight()||0,t-=parseInt(n.css("padding-top"),10),t-=e?parseInt(n.css("padding-bottom"),10):this.$("footer:last").outerHeight()||0}}),GB.views.geckometerWidget=GB.views.Widget.extend({templateContext:function(e){var t,n,a,l,i,s=this.model,r="2x2"===s.get("layout").size,o=parseFloat(s.data.item)||0,c=0,h=parseFloat(s.data.max.value)||0,d=parseFloat(s.data.min.value)||0;return o>h&&(h=o),d>o&&(d=o),t=0>d?Math.abs(d):0,a=d+t,n=h+t,l=o+t,i=n-a,o>0&&i>0?l>=n?c=70:(i=(l-a)/i,c=Math.round(140*i-70)):c=-70,_.extend(e,{size:r?"x72":e.isLarge?"x48":"x30",valueSize:r?"x24":e.isLarge?"x14":"x11",value:GB.utils.formatNumber(o),max:GB.utils.formatNumber(h,"","",2,!1),min:GB.utils.formatNumber(d,"","",2,!1),labelMax:s.data.max.text||"",labelMin:s.data.min.text||"",cbClass:r?"-big":"",angle:c,isLargeTemplate:r,assetHost:ASSET_IMAGE_HOST}),e},afterRender:function(e){var t,n,a,l,i=e.isLargeTemplate?103:48;this.$(".pointer").rotate(e.angle),t=Math.cos(Math.PI/180*e.angle),n=Math.sin(Math.PI/180*e.angle),a=Math.round(.8*i*n/2),l=Math.round(.8*(i-i*t)/2),this.$(".pointer-canvas"+e.cbClass).css({left:(e.isLargeTemplate?91:46)+a,bottom:-l})}}),GB.views.linechartWidget=GB.views.Widget.extend({templateContext:function(e){var t=this.model,n=t.data.settings,a=function(e){return+e||0},l=_.max(t.data.item,a),i=_.min(t.data.item,a),s="";switch(l===i&&(l+=.1,i-=.1),t.get("layout").size){case"2x1":s="440x148&chma=0,0,10,0";break;case"2x2":s="440x388&chma=0,0,20,0";break;default:s="200x148&chma=0,0,10,0"}return e.chartSource="https://chart.googleapis.com/chart?&cht="+(n.axisg?"lc":"ls")+"&chf=bg,s,23252600"+"&chs="+s+"&chd=t:"+t.data.item.join()+"&chds="+i+","+l,n.axisx.length>0&&n.axisy.length>0?e.chartSource+="&chxt=x,y&chxl=0:|"+n.axisx.join("|")+"|1:|"+n.axisy.join("|"):n.axisx.length>0?e.chartSource+="&chxt=x&chxl=0:|"+n.axisx.join("|"):n.axisy.length>0&&(e.chartSource+="&chxt=y&chxl=0:|"+n.axisy.join("|")),null!=n.linew&&(e.chartSource+="&chls="+(parseInt(n.linew,10)||0)),null!=n.colour&&(e.chartSource+="&chco="+n.colour),e},templateName:function(){return"widget_piechart_linechart"}}),GB.views.piechartWidget=GB.views.linechartWidget.extend({templateContext:function(e){var t=this.model;return e.chartSource="https://chart.googleapis.com/chart?cht=p&chf=bg,s,23252600&chs="+("1x1"===t.getLayout().size?"200x148":"440x388")+"&chd=t:"+_.pluck(t.data.item,"value").join()+"&chds=0,"+_.max(t.data.item,function(e){return+e.value||0
}).value+"&chdl="+_.pluck(t.data.item,"label").join("|")+"&chco="+this.colors(t).join("|"),e},colors:function(e){var t=[];return t=e.data.item?_.has(_.first(e.data.item),"color")?_.pluck(e.data.item,"color"):_.pluck(e.data.item,"colour"):[]}}),GB.views.funnelchartWidget=GB.views.Widget.extend({templateContext:function(e){var t,n,a,l,i=this.model,s=i.get("layout").size,r=_.max(i.data.item,function(e){return parseFloat(e.value)}).value,o=i.data.item.length,c=i.data.relative,h=["973b25","a94831","b4512e","ca7f1d","be791f","b27019","9aa336","868e2e","737a2a","6f7620"],d=0;for(e.results=[],e.isReverse&&h.reverse(),"2x1"===s?o=o>3?3:o:"2x2"===s&&(o=o>8?8:o),t={},t["2x1"]=[70,70,45],t["2x2"]=[70,180,120,90,70,60,50,45],t=t[s][o-1];o>d;++d)a=r>0?Math.round(100*i.data.item[d].value/r):0,n=c&&0!==d?0!==+i.data.item[d-1].value?Math.round(100*i.data.item[d].value/i.data.item[d-1].value):0===+i.data.item[d].value?0:"-":a,a>=0&&10>=a?l=h[0]:a>=11&&20>=a?l=h[1]:a>=21&&30>=a?l=h[2]:a>=31&&40>=a?l=h[3]:a>=41&&50>=a?l=h[4]:a>=51&&60>=a?l=h[5]:a>=61&&70>=a?l=h[6]:a>=71&&80>=a?l=h[7]:a>=81&&90>=a?l=h[8]:a>=91&&100>=a&&(l=h[9]),e.results[d]={width:a,color:l,value:i.data.item[d].value,label:i.data.item[d].label||"",percentage:n};return _.extend(e,{showPercentage:"hide"!==i.data.percentage,barHeight:t}),e}}),GB.views.bulletchartWidget=GB.views.Widget.extend({verticalWidth:295,horizontalWidth:225,templateContext:function(e){return _.extend(e,this.getBaseContext()),this.context=e,e.results=_.map(this.getDataItems(),this.createBullet,this),e},getLayoutOrientation:function(){var e="horizontal";return"vertical"===this.model.data.orientation&&(e="vertical"),e},getLayoutWidth:function(){var e=this.horizontalWidth;return"vertical"===this.getLayoutOrientation()&&(e=this.verticalWidth),e},getLayoutAttributes:function(){switch(this.model.get("layout").size){case"2x1":return{width:this.horizontalWidth,orientation:"horizontal"};case"1x2":return{width:this.verticalWidth,orientation:"vertical"};default:return{orientation:this.getLayoutOrientation(),width:this.getLayoutWidth()}}},getBaseContext:function(){var e=this.getLayoutAttributes();return"vertical"===e.orientation?(e.dimension="height",e.position="bottom",e.isHorz=!1):(e.dimension="width",e.position="left",e.isHorz=!0),e},getDataItems:function(){var e=this.model.data.item;return _.isArray(e)||(e=[e]),e},getRangeItems:function(e,t){var n,a=e.range,l=this.getWidth(),i=0;return n=_.map(a,function(e,n){var a=this.calculateWidth(e.end-e.start,t);return i+=a,{color:this.extractColor(e,n),width:a}},this),l>i&&(_.last(n).width+=l-i),n},getScaleLength:function(e){var t=function(e){return parseFloat(e)},n=+_.max(e.axis.point,t),a=+_.min(e.axis.point,t);return n-a},getWidth:function(){return this.context.width},calculateWidth:function(e,t){return e*this.getWidth()/t},createBullet:function(e){var t=this.getScaleLength(e),n={scaleLength:t,label:e.label||"",subLabel:e.sublabel||"",range:this.getRangeItems(e,t),axis:e.axis.point};return this.setMeasure(n,e),this.setComparative(n,e),"vertical"===this.context.orientation&&(n.axis.reverse(),n.range.reverse()),n},setMeasure:function(e,t){var n;null!=t.measure.current&&null!=t.measure.projected?n=this.setCurrentAgainstProjectedState:null!=t.measure.current&&null==t.measure.projected?n=this.setCurrentOnlyState:null!=t.measure.projected&&null==t.measure.current&&(n=this.setProjectedOnlyState),_.isFunction(n)&&n.call(this,e,t)},setComparative:function(e,t){null!=t.comparative&&(_.isArray(t.comparative.point)||(t.comparative.point=[t.comparative.point]),e.comparative=_.map(t.comparative.point,function(t){var n=t-e.axis[0];return this.calculateWidth(n,e.scaleLength)},this))},setCurrentAgainstProjectedState:function(e,t){var n,a,l,i,s;n=+t.measure.current.start>+t.measure.projected.start?t.measure.projected.start:t.measure.current.start,a=+t.measure.current.end>+t.measure.projected.end?t.measure.current.end:t.measure.projected.end,l=n-e.axis[0],s=a-n,i=t.measure.current.end-t.measure.current.start,e.measure={left:this.calculateWidth(l,e.scaleLength),width:this.calculateWidth(s,e.scaleLength),bar:this.calculateWidth(i,e.scaleLength)}},setCurrentOnlyState:function(e,t){var n=t.measure.current.start-e.axis[0],a=t.measure.current.end-t.measure.current.start;e.measure={left:this.calculateWidth(n,e.scaleLength),width:this.calculateWidth(a,e.scaleLength),bar:this.getWidth()}},setProjectedOnlyState:function(e,t){var n=t.measure.projected.start-e.axis[0],a=t.measure.projected.end-t.measure.projected.start;e.measure={left:this.calculateWidth(n,e.scaleLength),width:this.calculateWidth(a,e.scaleLength),bar:0}},extractColor:function(e,t){return e.color?t=e.color:e.colour&&(t=e.colour),t}}),GB.views.mapWidget=GB.views.Widget.extend({templateContext:function(e){var t=this.model,n={},a=t.get("configuration")||{},l="world";switch("string"==typeof a.map&&(l=a.map.toLowerCase()),l="us"===l?"USMap":l.charAt(0).toUpperCase()+l.slice(1)+"Map",e.footerName=a.info&&a.info.title?a.info.url?'<a class="link-ext" href="'+a.info.url+'" target="_blank">'+a.info.title+"</a>":a.info.title:'<a class="lnk-ext" href="http://www.mapping.com/" target="_blank">Mapping</a>',"EuropeMap"===l&&a.region&&(n.regionSettings=GB.mappingRegions[a.region],n.region=a.region),t.get("layout").size){case"3x3":"WorldMap"===l&&(n.size=1150,n.mapWidth=6800,n.dimensions={w:1e4,h:5050},n.mapStyle="margin-top:170px"),"USMap"===l?(n.size=800,n.mapWidth=1300,n.dimensions={w:950,h:650},n.mapStyle="margin-top:0px;margin-left:50px;"):"EuropeMap"===l&&(n.size=1150,n.mapWidth=330,n.dimensions={w:1e4,h:5050},n.mapStyle="margin-top:-70px;");break;case"4x2":"WorldMap"===l&&(n.size=1150,n.mapWidth=6e3,n.dimensions={w:1e4,h:5050},n.mapStyle="margin-left:80px;margin-top:10px;"),"USMap"===l?(n.size=800,n.mapWidth=1125,n.dimensions={w:950,h:650},n.mapStyle="margin-top:100px;"):"EuropeMap"===l&&(n.size=1150,n.mapWidth=450,n.dimensions={w:1e4,h:5050},n.mapStyle="margin-top:-70px;margin-left:170px;");break;case"4x3":"WorldMap"===l&&(n.size=1150,n.mapWidth=5e3,n.dimensions={w:1e4,h:5050},n.mapStyle="margin-top:100px"),"USMap"===l?(n.size=800,n.mapWidth=810,n.dimensions={w:950,h:650},n.mapStyle="margin-top:50px"):"EuropeMap"===l&&(n.size=1150,n.mapWidth=280,n.dimensions={w:1e4,h:5050},n.mapStyle="margin-top:-120px;margin-left:50px;");break;case"4x4":"WorldMap"===l&&(n.size=1150,n.mapWidth=5e3,n.dimensions={w:1e4,h:5050},n.mapStyle="margin-top:200px"),"USMap"===l?(n.size=800,n.mapWidth=800,n.dimensions={w:950,h:650},n.mapStyle="margin-top:150px"):"EuropeMap"===l&&(n.size=1150,n.mapWidth=200,n.dimensions={w:1e4,h:5050},n.mapStyle="margin-top:-120px;margin-left:0px;");break;default:"WorldMap"===l&&(n.size=1150,n.mapWidth=10800,n.dimensions={w:1e4,h:5050},n.mapStyle="margin-top:100px"),"USMap"===l?(n.size=800,n.dimensions={w:950,h:650},n.mapStyle="margin-top:50px"):"EuropeMap"===l&&(n.size=1150,n.mapWidth=500,n.dimensions={w:1e4,h:5050},n.mapStyle="margin-top:-40px")}var i=_.select(t.data.points.point,function(e){return e&&_.has(e,"latitude")&&_.has(e,"longitude")});return _.extend(e,n,{type:1,points:i,mapType:l}),e},afterRender:function(e){var t,n,a,l=0;if(e){if(e.regionSettings)return this.renderEURegion(e);for(n=new ScaleRaphael("svgmap"+e.id,e.id,e.dimensions.w,e.dimensions.h),t=n[e.mapType](),_.has(e,"mapWidth")&&(t.width=e.mapWidth),n.scaleAll(e.size/t.width),a=e.points.length;a>l;l++)t.plot(e.points[l])}},renderEURegion:function(e){var t,n,a,l=this.model.id,i=260.129,s=173.396,r=-24.537964,o=68.994141,c=e.regionSettings.l_lon,h=e.regionSettings.r_lon,d=e.regionSettings.t_lat,p=e.regionSettings.b_lat,u=0,f=Math.abs((o-r)/(h-c));switch(this.$(".widget-canvas").css("width","100% !important").css("height","100% !important"),GB.utils.newSizeToOldSize(this.model.getLayout().size)){case"xxx":t=440,n=388,a=0;break;case"xxxxxxxx":t=680,n=628,a=0;break;case"xxxxxxxxx":t=440,n=388,a=220;break;case"xxxxxxxxxx":t=680,n=628,a=120;break;case"xxxxxxxxxxx":t=920,n=868,a=0}var m=t/i,g=n/s,v=Math.min(m,g)*f,y=new ScaleRaphael("svgmap"+l,l,i,s);window["map"+l]=y.EuropeMap(e.region),y.scaleAll(v),window["map"+l].zk=f;var b=y.height;n>b&&(b=parseInt((n-b)/2,10),$("#svgmap"+l).css("marginTop",b));for(var L=e.points,w=0;L.length>w;w++)window["map"+l].plot(L[w]);this.$el.data("svg",{w:i,h:s,p:y}).attr("widget-type","svg").attr("type",this.model.get("type"));var x=window["map"+l].convertCoords(d,c),_=window["map"+l].convertCoords(p,h);Math.abs((_[0]-x[0])/(x[1]-_[1])),this.$("#svgmap"+l).css("margin-left",-x[0]*v+a+"px").css("margin-top",-x[1]*v+u+"px")}}),GB.views.listWidget=GB.views.textWidget.extend({templateContext:function(e){var t=this.model,n=t.getLayout().size,a=1,l=0,i=[],s=0,r=_.isArray(t.data)?t.data:[t.data];switch(e.descriptionSize="x11",n){case"1x1":a=e.isLarge?3:2;break;case"1x2":a=e.isLarge?8:7;break;case"2x2":a=4,e.descriptionSize="x18"}for(;r.length>l;l++)s=Math.floor(l/a),"2x2"===n&&r[l].label&&r[l].label.name&&(r[l].hasLabel=!0,r[l].label.colour&&(r[l].label.color=r[l].label.colour,delete r[l].label.colour)),i[s]||(i[s]={},i[s].items=[]),i[s].items.push(r[l]);return i.length>1&&(e.moreThanOneItem=!0,e.totalItems=i.length),e.pages=i,e},widgetClassName:function(){return"list-widget text-widget"},templateName:function(){return"widget_list"}}),GB.views.monitoringWidget=GB.views.Widget.extend({templateContext:function(e){var t=this.model,n="large";return e.status=t.data.status.toLowerCase(),e.statusClass="","1x1"===t.getLayout().size?(e.statusSize=e.isLarge?"x60":"x48",e.secondaryStatSize=e.isLarge?"x24":"x18",e.secondaryTextClass="t-size-x10"):(e.statusSize="x100",e.secondaryStatSize="x36",e.secondaryTextClass="t-size-x24",n="extra-large"),"up"===e.status?e.statusClass="positive":"down"===e.status&&(e.statusClass="negative",e.downTime="NOW",e.responseTime="N/A"),e.statusClass+=" arrow-"+e.status+"-"+n,"down"!==e.status&&(e.downTime=t.data.downTime||"—",e.responseTime=t.data.responseTime||"—",isNaN(e.responseTime)||(e.responseTime+="ms")),e}}),GB.views.clockWidget=GB.views.Widget.extend({dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],templateContext:function(e){var t=this.use24HourClock();return e.canReload=!1,e.timeSize=60,e.dateSize=24,e.isLarge&&t?e.timeSize=72:e.hasTitle&&(e.dateSize=20),e},beforeRender:function(){clearInterval(this.intv)},afterRender:function(){this.showTime(),this.intv=setInterval(_.bind(this.showTime,this),1e4)},showTime:function(){var e=this.getGMTTime(),t="",n=parseInt(e.hours,10),a=parseInt(e.minutes,10),l=this.use24HourClock();l?(24==n&&(n="00"),10>n&&(n="0"+n)):(t=12>n?"AM":"PM",n=n>12?n-12:n,n=0===n?12:n),10>a&&(a="0"+a),this.$(".time").html(n+":"+a),l||this.$(".time").append("<sub>"+t+"</sub>"),this.$(".day").html(e.day),this.$(".full-date").html(e.date+" "+e.month+" "+e.year)},use24HourClock:function(){var e=(this.model.get("configuration")||{}).fullhour;return _.isArray(e)?!!e[0]:1===+e},beforeRemove:function(){this.beforeRender()},getTimeOffset:function(){var e=(this.model.get("configuration")||{}).timezone_offset||0;return 3600*e},getGMTTime:function(){var e=new Date,t=e.getTime(),n=6e4*e.getTimezoneOffset(),a=t+n+1e3*this.getTimeOffset(),l=new Date(a),i={hours:null,minutes:null,date:null,day:null,month:null};return i.hours=l.getHours(),i.minutes=l.getMinutes(),i.seconds=l.getSeconds(),i.date=l.getDate(),i.day=this.dayOfWeek[l.getDay()],i.month=this.months[l.getMonth()],i.year=l.getFullYear(),i}}),GB.views.imageWidget=GB.views.textWidget.extend({templateContext:function(e){var t=this.model,n=[{text:'<img src="'+this.getImageUrl(t)+'">'}];return _.extend(e,{items:n,moreThanOneItem:n.length>1,totalItems:n.length}),e},getImageUrl:function(e){var t=e.get("configuration").path,n=(new Date).getTime()/1e3;return t=-1===t.indexOf("?")?t+"?geckorefresh"+n:t+"&geckorefresh"+n},widgetClassName:function(){return"text-widget image-widget"}}),GB.views.Form=GB.views.DynamicView.extend({tagName:"form",events:{"change .map-field":"updateMapRegions","change .timezone-country":"showCountryTimezones","change .sneaky-select > select":"updateSelectLabel","click .help-icon":"toggleHelpBubble","click .file-field > label":"triggerFileField",submit:"onSubmit"},_arrayFieldRegex:/\[\]\s*$/,initialize:function(e){e||(e={}),e.className?this.$el.addClass(e.className):this.$el.addClass("light-ui"),e.onSubmit&&(this._onSubmit=e.onSubmit),this.findModelValuesIn=e.modelValuesAttribute,this.reset(e)},generateFromConfig:function(e,t){var n={};return t||(t={}),_.each(e,function(e){var a,l=e.type.toLowerCase();e=_.extend({elementClass:""},e),this._isInputField(l)&&(l="input"),"map"===l?(e.value=t[e.name],e.region=t.region):"timezone"===l?e.value={timezone:t[e.name],country:t.country}:this._arrayFieldRegex.test(e.name)?(a=e.name.replace(this._arrayFieldRegex,""),"undefined"==typeof n[e.name]&&(n[e.name]=0),e.value=_.isArray(t[a])?t[a][n[e.name]++]:t[a]):e.value=t[e.name],"reload"===e.on_update&&(e.elementClass+=" reload"),this[l+"For"](e.name,e)},this),this},createFieldOptions:function(e,t,n){var a=!1,l=0;return e.options=_.map(e.options,function(n){var i=_.isObject(n)&&_.isEmpty(n);if(i)throw new Error("invalid config");var s=_.clone(n);return s.id||(s.id=e.name+"-"+s.name.replace(/[^\w\d\-]+/g,"")+"-"+l),l+=1,s.selected=_.isArray(t)?"undefined"!=typeof _.find(t,function(e){return e==s.value}):n.value==t,s.selected&&(e.selectedValueText=s.name,a=!0),s}),n&&!a&&e.options.length&&(e.options[0].selected=!0),a||(e.selectedValueText=e.options[0].name),e},addFieldset:function(e){return e=_.extend({legend:""},e),this.$fieldset=$("<fieldset />"),e.legend&&this.$fieldset.append("<legend>"+e.legend+"</legend>"),this.$frag.append(this.$fieldset),this},inputFor:function(e,t){return t||(t={}),t.type&&"input"!==t.type||(t.type="text"),"password"===t.type&&(t.selectedValueText="******"),this._formField(e,t,"input"),this},buttonFor:function(e,t){return this._formField(e,t,"button"),this},hiddenInputFor:function(e,t){return this.$fieldset.append('<input type="hidden" name="'+e+'" value="'+t.value+'">'),this},selectFor:function(e,t){return this._selectionField(e,t,"select")},updateSelectLabel:function(e){var t=$(e.currentTarget),n=t.prev("label");n.text(t.find("option:selected").text())},radioFor:function(e,t){return this._selectionField(e,t,"radio")},checkboxFor:function(e,t){return this._selectionField(e,t,"checkbox")},_selectionField:function(e,t,n){var a=t.value;return void 0===a&&(a=this.getModelValue(e)),t.name=e,this.createFieldOptions(t,a,"radio"===n),this._formField(e,t,n),this},fileFor:function(e,t){return this._formField(e,_.extend({elementLabel:"Click to browse..."},t),"file"),this},mapFor:function(e,t){return e||(e="map"),t=_.extend({regions:[]},t),"undefined"==typeof t.map_dropdown&&(t.map_dropdown=!0),"undefined"==typeof t.region_dropdown&&(t.region_dropdown=!0),t.map_dropdown&&(t.maps=[{value:"world",name:"World Map",selected:"world"===t.value},{value:"europe",name:"Europe Map",selected:"europe"===t.value},{value:"us",name:"US Map",selected:"us"===t.value}],t.regions.push({value:"",name:"N/A"})),t.region_dropdown&&"europe"===t.value&&(t.regions.length&&(t.regions[0].name="No region"),t.regions=t.regions.concat(_.map(GB.mappingRegions,function(e,n){return{value:n,name:e.title,selected:t.region===n}}))),t.selectedCountry=_.findWhere(t.maps,{selected:!0})||_.first(t.maps),t.selectedRegion=_.findWhere(t.regions,{selected:!0})||_.first(t.regions),this._formField(e,t,"map"),this},timezoneFor:function(e,t){var n,a=t.value||{};return a.country||a.timezone||(a={timezone:"Europe/London",country:"GB"}),t.countries=GB.countryTimezones.countries.slice(),n=_.find(t.countries,function(e){return a.country===e.code}),n?(t.countryLabel=n.name,n.selected=!0,t.timezones=GB.countryTimezones.timezones[n.code].slice()):a.timezone&&!a.country&&(t.timezones=GB.countryTimezones.oldTimezones.slice()),_.each(t.timezones,function(e){e.selected=e.code===a.timezone,e.selected&&(t.timezoneLabel=e.name)}),this._formField(e,t,"timezone"),this},showCountryTimezones:function(e){var t=$(e.currentTarget),n=t.val(),a=t.parent().next().find("select"),l=GB.countryTimezones.timezones;a.empty().html(_.reduce(l[n],function(e,t){return e.add('<option value="'+t.code+'">'+t.name+"</option>")},$())).change()},updateMapRegions:function(e){var t,n,a=$(e.currentTarget),l=a.closest(".form-field").find(".map-region-field");l.length&&("europe"===a.val()?(t=$('<option value="">No region</option>'),n=_.sortBy(_.keys(GB.mappingRegions),function(e){return e}),_.each(n,function(e){var n=GB.mappingRegions[e];t=t.add('<option value="'+e+'">'+n.title+"</option>")}),l.html(t).parent().show().find("label").text("No region")):l.html('<option value="">N/A</option>').parent().hide())},_formField:function(e,t,n){var a;t=_.extend(t,{name:e,value:t.value||this.getModelValue(e)}),t.fieldClass||(t.fieldClass=""),t.fieldClass+=" form-field",this._validationSettings[e]={type:n,fieldType:this._isInputField(n,!0)?"input":n,fieldClass:t.fieldClass,required:!!t.required,extraValidation:t.validation,label:t.label},t.readOnly?(t.fieldClass+=" read-only",a="<span>"+(t.selectedValueText||t.value)+"</span>"):a=GB.templates[n+"FormElement"](t),this.$fieldset.append(GB.templates.elementWrapper(_.extend(t,{html:a})))},getModelValue:function(e){var t;return this.model&&(t=this.findModelValuesIn?this.model.get(this.findModelValuesIn)[e]:this.model.get(e),"undefined"!=typeof t)?t:""},render:function(e){return e=_.extend({action:"",method:"GET"},e),e.submitText&&this.inputFor("submit",{value:e.submitText,type:"submit",fieldClass:"button-row",elementClass:"btn"}),this.$el.attr("method",e.method).attr("action",e.action).empty().append(this.$frag.html()),this.$frag=null,this},reset:function(e){return this._validationSettings={},this.$frag=$("<form />"),this.addFieldset(e),this},getData:function(e){var t;return e=_.extend({deserialize:!0},e),t=e.deserialize?this.deserialize(this.$el.serializeArray()):this.$el.serialize(),t||{}},deserialize:function(e){var t=this._arrayFieldRegex;return _.reduce(e,function(e,n){var a=n.name.replace(t,""),l=n.value;return e[a]?(_.isArray(e[a])||(e[a]=[e[a]]),e[a].push(l)):e[a]=l,e},{})},validate:function(){var e=this.getData(),t=0,n=this;return this.hideErrorMessage(),_.each(this._validationSettings,function(a,l){n.validateField(l,e[l],a)||(t+=1)}),!t},validateField:function(e,t,n){var a=this,l=!0;return n||(n=this._validationSettings[e]),this.clearValidation(e),"string"==typeof t&&(t=$.trim(t)),!n.required||t&&t.length?(n.extraValidation&&_.each(n.extraValidation,function(n){return"pattern"!==n.type||n.regex.test(t)?void 0:(a.markFieldInvalid(e,n.message),l=!1)}),l):(this.markFieldInvalid(e,["input"===n.type?"Enter":"Select"," a value for ",n.label].join("")),!1)},markFieldInvalid:function(e,t){this._getFieldWrapper(e).addClass("invalid").append('<span class="validation-message">'+t+"</span>")},clearValidation:function(e){this._getFieldWrapper(e).removeClass("invalid").find(".validation-message").remove()},_getFieldWrapper:function(e){var t=this._validationSettings[e];return this.$(t.fieldType+"[name="+e.replace(/(\[|\])/g,"\\$1")+"]").closest(".form-field")},_isInputField:function(e,t){var n,a=["input","text","password","email","search"];return t&&(a=a.concat(["radio","checkbox"])),n=new RegExp("^(?:"+a.join("|")+")$"),n.test(e)},onSubmit:function(e){_.isFunction(this._onSubmit)&&(this._onSubmit.call(this,e),e.preventDefault())},toggleHelpBubble:function(e){var t=this.$el.find(".help-text");return t.addClass("hidden"),$(e.currentTarget).parent().find(".help-text").toggleClass("hidden"),$(document).one("click",function(){t.addClass("hidden")}),e.preventDefault(),e.stopPropagation(),!1},triggerFileField:function(e){$(e.currentTarget).next("input").click()}}),GB.views.Modal=GB.views.DynamicView.extend({className:"modal",loadingOverlay:{colorClass:"modal",css:{opacity:.8}},events:{"click .btn.confirm":"confirm","click .btn.cancel":"cancel",click:"checkForClose"},settings:{closeOnConfirm:!0},open:function(){var e=this;return setTimeout(function(){e.trigger("open").$el.addClass("open")},100),this},close:function(){var e=this;return this.$el.removeClass("open"),setTimeout(function(){e.trigger("close").remove()},600),this},confirm:function(e){var t=!0;"function"==typeof this.beforeConfirm&&(t=this.beforeConfirm()),t&&(this.onConfirm(e),this.settings.closeOnConfirm&&this.close()),e.preventDefault()},cancel:function(e){var t=!0;"function"==typeof this.beforeCancel&&(t=this.beforeCancel()),t&&(this.onCancel(),this.close()),e.preventDefault()},checkForClose:function(e){e.target===this.el&&(this.close(),e.preventDefault())},onConfirm:function(){},onCancel:function(){}}),GB.views.CryptoPasswordModal=GB.views.Modal.extend({settings:{closeOnConfirm:!1},initialize:function(e){this._settings=e||{}},events:function(){return _.extend({"submit .form-wrapper form":"confirm"},GB.views.Modal.prototype.events)},render:function(){GB.Tracker.track("Encryption key password prompt opened");var e=GB.templates.cryptoPasswordModal({confirmText:"Update"});return this.$el.html(e).appendTo("body"),this.form=new GB.views.Form,this.form.inputFor("cryptoPassword",{type:"password",required:!0}),this.$(".form-wrapper").html(this.form.render().$el),this.$el.click(_.bind(this.outerClicked,this)),this},onConfirm:function(){if(this.form.validate()){var e=this.form.getData().cryptoPassword;this._validateCryptoPassword(e)?(GB.Tracker.track("Valid crypto password given"),this.trigger("confirmed",e)):(GB.Tracker.track("Invalid crypto password given"),this.form.showErrorMessage("Invalid decryption password!"))}},_validateCryptoPassword:function(e){var t=GB.models.widgets.where({client_encryption_enabled:!0})[0];return t._cryptTest(e)},onCancel:function(){this.trigger("cancelled"),GB.config.cryptoPasswordDeclined=!0},outerClicked:function(e){var t=$(e.target).is(this.$el);return t&&this.onCancel(),t}}),GB.views.CustomWidgetErrorModal=GB.views.Modal.extend({settings:{closeOnConfirm:!0},initialize:function(e){this._settings=e||{}},render:function(){var e=GB.templates.customWidgetErrorModal({confirmText:"Close",errorMessage:this._settings.errorMessage});return this.$el.html(e).appendTo("body"),this}}),GB.DashboardRouter=Backbone.Router.extend({routes:{"dashboard(s)/:hash(/)":"sharingDashboard","loop/:id(/)":"sharingLoop","dashboard/loop/:id(/)":"sharingLoop","edit(/dashboards/:id)(/)":"editDashboard"},editDashboard:function(e){var t;return e?t=GB.collections.dashboards.get(e):(e=GB.cookie.get("gb_active_dashboard"),t=GB.collections.dashboards.get(e)||GB.collections.dashboards.first()),t?(GB.views.dashboard?GB.views.dashboard.switchDashboard({dashboard:t}):this._renderAdminMode(t),void 0):($("#dashboard-admin").addClass("hidden"),$("#dashboard-admin-bar  div.inner span").addClass("hidden"),void 0)},sharingDashboard:function(){GB.models.config.set("read_only",!0),this._setCacheKeys(GB.models.dashboard.get("read_only")),GB.views.dashboard=new GB.views.Dashboard({el:"#dashboard",model:GB.models.dashboard}),GB.views.dashboard.render()},sharingLoop:function(){GB.models.dashboard=GB.collections.dashboards.first(),GB.models.config.set("loop_mode",!0),this.sharingDashboard(),GB.views.dashboard.startPublicLoop(GB.models.config.get("period"))},_renderAdminMode:function(e){GB.models.dashboard=e,this._setCacheKeys(e.get("read_only")),GB.models.organization.bindToUsages(),GB.views.header=new GB.views.Header({el:"#main-header",model:e}),GB.views.dashboard=new GB.views.Dashboard({el:"#dashboard",model:e}),GB.models.config.get("first_time_user")&&e.get("can_edit")&&(new GB.views.NewUserSplashScreen).render({username:GB.models.user.get("first_name")}).open(),GB.views.header.render({dashboard:e}),GB.views.dashboard.render(),GB.views.header.shouldToggle(GB.views.dashboard)},_setCacheKeys:function(e){GB.models.cacheKey=function(){var t="rails-"+(e?"ro-":"");return function(e){return t+e}}()}}),GB.mappingRegions={albania:{title:"Albania",t_lat:42.68319,b_lat:39.64736,l_lon:18.28854,r_lon:22.08208},andorra:{title:"Andorra",t_lat:42.70639,b_lat:42.44625,l_lon:1.265833,r_lon:1.688611},belarus:{title:"Belarus",t_lat:56.9015,b_lat:51.25185,l_lon:23.1654,r_lon:32.74006},poland:{title:"Poland",t_lat:55.5666,b_lat:49.00291,l_lon:14.14917,r_lon:24.14347},united_kingdom:{title:"United Kingdom",t_lat:60.860629,b_lat:49.95528,l_lon:-12.158056,r_lon:5.749444},bosnia_and_herzegovina:{title:"Bosnia and Herzegovina",t_lat:45.56595,b_lat:42.56583,l_lon:15.33059,r_lon:19.61856},croatia:{title:"Croatia",t_lat:46.88082000000001,b_lat:42.44944,l_lon:13.29174,r_lon:19.425},iceland:{title:"Iceland",t_lat:68.0361,b_lat:63.39139,l_lon:-24.5384,r_lon:-13.49944},liechtenstein:{title:"Liechtenstein",t_lat:47.30454,b_lat:47.05746,l_lon:9.194637,r_lon:9.598635},macedonia:{title:"Macedonia",t_lat:0,t_lat:42.82388,b_lat:40.85589,l_lon:20.01917,r_lon:23.00923},moldova:{title:"Moldova",t_lat:48.49958,b_lat:45.44865,l_lon:26.33499,r_lon:30.42871000000001},montenegro:{title:"Montenegro",t_lat:43.5978,b_lat:41.849,l_lon:18.05555,r_lon:20.405},norway:{title:"Norway",t_lat:72.13832000000001,b_lat:57.98792,l_lon:4.883333,r_lon:31.07354000000001},russia:{title:"Russia",t_lat:70.30109,b_lat:43.65728,l_lon:23.36145,r_lon:68.994141},san_marino:{title:"San Marino",t_lat:44.01032,b_lat:43.83319,l_lon:12.247,r_lon:12.4033},serbia:{title:"Serbia",t_lat:46.87278,b_lat:41.849,l_lon:17.45555,r_lon:24.005},switzerland:{title:"Switzerland",t_lat:48.71144000000001,b_lat:47.69409,l_lon:5.573114,r_lon:10.70547},turkey:{title:"Turkey",t_lat:46.09194,b_lat:35.81972,l_lon:25.73167000000001,r_lon:44.81818000000001},ukraine:{title:"Ukraine",t_lat:54.36419000000001,b_lat:44.37915,l_lon:22.15144,r_lon:40.16763},vatican_city_state_holy_see:{title:"Vatican City State",t_lat:41.993,b_lat:41.90151,l_lon:12.22483,r_lon:12.4},austria:{title:"Austria",t_lat:51.01875,b_lat:46.40749,l_lon:8.533569,r_lon:18.16639},belgium:{title:"Belgium",t_lat:52.48694,b_lat:49.50888,l_lon:1.541667,r_lon:6.398204},bulgaria:{title:"Bulgaria",t_lat:45.2247,b_lat:41.24305,l_lon:21.36528,r_lon:29.58324},cyprus:{title:"Cyprus",t_lat:36.68861,b_lat:34.64027,l_lon:31.27861,r_lon:34.58604},czech_republic:{title:"Czech Republic",t_lat:52.05249000000001,b_lat:48.58138,l_lon:12.0937,r_lon:18.85125},denmark:{title:"Denmark",t_lat:59.03627,b_lat:54.56194000000001,l_lon:7.092916000000001,r_lon:15.13764},estonia:{title:"Estonia",t_lat:59.95805,b_lat:57.52610000000001,l_lon:23.41041,r_lon:28.1643},finland:{title:"Finland",t_lat:70.08861000000002,b_lat:59.8068,l_lon:16.58093,r_lon:35.58196},france:{title:"France",t_lat:51.29111,b_lat:41.36729,l_lon:-4.776667,r_lon:9.552568},germany:{title:"Germany",t_lat:56.05653000000001,b_lat:47.27472,l_lon:3.864999000000001,r_lon:17.03382},greece:{title:"Greece",t_lat:42.7143,b_lat:34.93083,l_lon:19.67458,r_lon:28.20722},hungary:{title:"Hungary",t_lat:49.57534,b_lat:45.74833,l_lon:16.1118,r_lon:22.8948},ireland:{title:"Ireland",t_lat:55.37999,b_lat:51.44555,l_lon:-11.46334,r_lon:-5.013056},italy:{title:"Italy",t_lat:47.09458000000001,b_lat:36.64916,l_lon:5.623967000000001,r_lon:19.5125},latvia:{title:"Latvia",t_lat:59.08326000000001,b_lat:55.67484,l_lon:20.05169,r_lon:29.23597},lithuania:{title:"Lithuania",t_lat:57.44985,b_lat:53.89034,l_lon:20.54283,r_lon:26.8068},luxembourg:{title:"Luxembourg",t_lat:50.17000000000001,b_lat:49.45939,l_lon:5.447777000000002,r_lon:6.724027},malta:{title:"Malta",t_lat:36.05181,b_lat:35.8011,l_lon:14.1717,r_lon:14.46971},netherlands:{title:"Netherlands",t_lat:53.66583,b_lat:50.75727000000001,l_lon:3.070866,r_lon:7.508364},portugal:{title:"Portugal",t_lat:42.35067,b_lat:32.6375,l_lon:-12.04945,r_lon:-4.190451},romania:{title:"Romania",t_lat:49.25716000000001,b_lat:43.6436,l_lon:20.06102,r_lon:29.66433},slovakia:{title:"Slovakia",t_lat:50.6,b_lat:47.74643,l_lon:16.34472,r_lon:22.55805},slovenia:{title:"Slovenia",t_lat:47.56972000000002,b_lat:45.42582000000001,l_lon:13.08347,r_lon:16.60787},spain:{title:"Spain",t_lat:45.76416,b_lat:27.73111,l_lon:-11.00292,r_lon:4.276388},sweden:{title:"Sweden",t_lat:69.0603,b_lat:55.34,l_lon:2.42919,r_lon:25.16601}};