var Hoptoad={VERSION:"0.1.0",NOTICE_XML:'<?xml version="1.0" encoding="UTF-8"?><notice version="2.0"><api-key></api-key><notifier><name>airbrake_js</name><version>0.1.0</version><url>http://airbrake.io</url></notifier><error><class>EXCEPTION_CLASS</class><message>EXCEPTION_MESSAGE</message><backtrace>BACKTRACE_LINES</backtrace></error><request><url>REQUEST_URL</url><component>REQUEST_COMPONENT</component><action>REQUEST_ACTION</action></request><server-environment><project-root>PROJECT_ROOT</project-root><environment-name>production</environment-name></server-environment></notice>',ROOT:window.location.protocol+"//"+window.location.host,BACKTRACE_MATCHER:/^(.*)\@(.*)\:(\d+)$/,backtrace_filters:[/notifier\.js/],errorDefaults:{url:window.location.href},_reportQueue:[],_busy:!1,notify:function(e){var n=escape(Hoptoad.generateXML(e)),a=Hoptoad.host||"airbrake.io",t="//"+a+"/notifier_api/v2/notices?data="+n;Hoptoad._queueReport(t)},_createLoggerFrame:function(){var e=Hoptoad._request=document.createElement("iframe");e.style.width="1px",e.style.height="1px",e.style.display="none",e.onload=Hoptoad._nextReport,document.getElementsByTagName("head")[0].appendChild(e)},_queueReport:function(e){Hoptoad._request||Hoptoad._createLoggerFrame(),Hoptoad._reportQueue.push(e),Hoptoad._busy||Hoptoad._nextReport()},_nextReport:function(){var e=Hoptoad._reportQueue.pop();e?(Hoptoad._busy=!0,setTimeout(function(){Hoptoad._request.src=e},100)):Hoptoad._busy=!1},setEnvironment:function(e){var n=/<environment-name>.*<\/environment-name>/;Hoptoad.NOTICE_XML=Hoptoad.NOTICE_XML.replace(n,"<environment-name>"+e+"</environment-name>")},setHost:function(e){Hoptoad.host=e},setKey:function(e){var n=/<api-key>.*<\/api-key>/;Hoptoad.NOTICE_XML=Hoptoad.NOTICE_XML.replace(n,"<api-key>"+e+"</api-key>")},setErrorDefaults:function(e){Hoptoad.errorDefaults=e},generateXML:function(e){var n=Hoptoad.mergeDefault(Hoptoad.errorDefaults,e),a=Hoptoad.NOTICE_XML,t=n.url||"",s=location.hash||"",i=Hoptoad.escapeText(t+s||""),o=Hoptoad.escapeText(n.component||""),r=Hoptoad.escapeText(n.action||""),l=Hoptoad.escapeText(n.type||"Error"),c=Hoptoad.escapeText(n.message||"Unknown error."),d=Hoptoad.setGroupingInBacktrace(n.grouping);if(""==Hoptoad.trim(i)&&""==Hoptoad.trim(o))a=a.replace(/<request>.*<\/request>/,"");else{var h="",p=n.extraInfo||{};p.HTTP_USER_AGENT=navigator.userAgent,h+="<cgi-data>",h+=Hoptoad.generateVariables(p),h+="</cgi-data>";for(var u=["params","session"],f=0;2>f;f++){var m=u[f];n[m]&&(h+="<"+m+">",h+=Hoptoad.generateVariables(n[m]),h+="</"+m+">")}a=a.replace("</request>",h+"</request>").replace("REQUEST_URL",i).replace("REQUEST_ACTION",r).replace("REQUEST_COMPONENT",o)}return a.replace("PROJECT_ROOT",Hoptoad.ROOT).replace("EXCEPTION_CLASS",l).replace("EXCEPTION_MESSAGE",c).replace("BACKTRACE_LINES",d.join(""))},generateVariables:function(e){var n,a="";for(n in e)a+='<var key="'+Hoptoad.escapeText(n)+'">'+Hoptoad.escapeText(e[n])+"</var>";return a},escapeText:function(e){return e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")},trim:function(e){return e.toString().replace(/^\s+/,"").replace(/\s+$/,"")},mergeDefault:function(e,n){var a,t={};for(a in n)t[a]=n[a];for(a in e)t.hasOwnProperty(a)||(t[a]=e[a]);return t},setGroupingInBacktrace:function(e){var n=[];if(e){var a=e.type||"",t=e.location||"";n.push('<line method="'+Hoptoad.escapeText(a)+'" file="'+Hoptoad.escapeText(t)+'" number="'+Hoptoad.escapeText(location.hostname||"")+'" />')}return n}};!function(e){var n;e.GeckoErrorLog={notify:function(e){var a;try{a="object"==typeof e?e:{message:e},n.notify(a)}catch(t){console.error(t)}},configure:function(e){this.settings=e||{},n={notify:function(e){console.log(e)}},"development"!==this.settings.environment&&(n=Hoptoad,this.enableCatchAll())},enableCatchAll:function(){e.onerror=function(e,n,a){return GeckoErrorLog.notify({message:e,extraInfo:{file:n||"",line:a||""}}),!0}}}}(this);